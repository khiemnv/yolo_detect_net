/**
 * Minified by jsDelivr using Terser v5.19.2.
 * Original file: /npm/js-clipper@1.0.1/clipper.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
"use strict";var navigator_appName,use_int32=!1,use_xyz=!1,use_lines=!0,use_deprecated=!1,ClipperLib={},isNode=!1;if("undefined"!=typeof module&&module.exports?(module.exports=ClipperLib,isNode=!0):"undefined"!=typeof document?window.ClipperLib=ClipperLib:self.ClipperLib=ClipperLib,isNode){nav="chrome";navigator_appName="Netscape"}else{var nav=navigator.userAgent.toString().toLowerCase();navigator_appName=navigator.appName}var dbits,browser={};-1!=nav.indexOf("chrome")&&-1==nav.indexOf("chromium")?browser.chrome=1:browser.chrome=0,-1!=nav.indexOf("chromium")?browser.chromium=1:browser.chromium=0,-1!=nav.indexOf("safari")&&-1==nav.indexOf("chrome")&&-1==nav.indexOf("chromium")?browser.safari=1:browser.safari=0,-1!=nav.indexOf("firefox")?browser.firefox=1:browser.firefox=0,-1!=nav.indexOf("firefox/17")?browser.firefox17=1:browser.firefox17=0,-1!=nav.indexOf("firefox/15")?browser.firefox15=1:browser.firefox15=0,-1!=nav.indexOf("firefox/3")?browser.firefox3=1:browser.firefox3=0,-1!=nav.indexOf("opera")?browser.opera=1:browser.opera=0,-1!=nav.indexOf("msie 10")?browser.msie10=1:browser.msie10=0,-1!=nav.indexOf("msie 9")?browser.msie9=1:browser.msie9=0,-1!=nav.indexOf("msie 8")?browser.msie8=1:browser.msie8=0,-1!=nav.indexOf("msie 7")?browser.msie7=1:browser.msie7=0,-1!=nav.indexOf("msie ")?browser.msie=1:browser.msie=0,ClipperLib.biginteger_used=null;var canary=0xdeadbeefcafe,j_lm=15715070==(16777215&canary);function BigInteger(t,i,e){ClipperLib.biginteger_used=1,null!=t&&("number"==typeof t&&void 0===i?this.fromInt(t):"number"==typeof t?this.fromNumber(t,i,e):null==i&&"string"!=typeof t?this.fromString(t,256):this.fromString(t,i))}function nbi(){return new BigInteger(null)}function am1(t,i,e,r,n,p){for(;--p>=0;){var o=i*this[t++]+e[r]+n;n=Math.floor(o/67108864),e[r++]=67108863&o}return n}function am2(t,i,e,r,n,p){for(var o=32767&i,l=i>>15;--p>=0;){var s=32767&this[t],h=this[t++]>>15,u=l*s+h*o;n=((s=o*s+((32767&u)<<15)+e[r]+(1073741823&n))>>>30)+(u>>>15)+l*h+(n>>>30),e[r++]=1073741823&s}return n}function am3(t,i,e,r,n,p){for(var o=16383&i,l=i>>14;--p>=0;){var s=16383&this[t],h=this[t++]>>14,u=l*s+h*o;n=((s=o*s+((16383&u)<<14)+e[r]+n)>>28)+(u>>14)+l*h,e[r++]=268435455&s}return n}j_lm&&"Microsoft Internet Explorer"==navigator_appName?(BigInteger.prototype.am=am2,dbits=30):j_lm&&"Netscape"!=navigator_appName?(BigInteger.prototype.am=am1,dbits=26):(BigInteger.prototype.am=am3,dbits=28),BigInteger.prototype.DB=dbits,BigInteger.prototype.DM=(1<<dbits)-1,BigInteger.prototype.DV=1<<dbits;var BI_FP=52;BigInteger.prototype.FV=Math.pow(2,BI_FP),BigInteger.prototype.F1=BI_FP-dbits,BigInteger.prototype.F2=2*dbits-BI_FP;var rr,vv,BI_RM="0123456789abcdefghijklmnopqrstuvwxyz",BI_RC=new Array;for(rr="0".charCodeAt(0),vv=0;vv<=9;++vv)BI_RC[rr++]=vv;for(rr="a".charCodeAt(0),vv=10;vv<36;++vv)BI_RC[rr++]=vv;for(rr="A".charCodeAt(0),vv=10;vv<36;++vv)BI_RC[rr++]=vv;function int2char(t){return BI_RM.charAt(t)}function intAt(t,i){var e=BI_RC[t.charCodeAt(i)];return null==e?-1:e}function bnpCopyTo(t){for(var i=this.t-1;i>=0;--i)t[i]=this[i];t.t=this.t,t.s=this.s}function bnpFromInt(t){this.t=1,this.s=t<0?-1:0,t>0?this[0]=t:t<-1?this[0]=t+this.DV:this.t=0}function nbv(t){var i=nbi();return i.fromInt(t),i}function bnpFromString(t,i){var e;if(16==i)e=4;else if(8==i)e=3;else if(256==i)e=8;else if(2==i)e=1;else if(32==i)e=5;else{if(4!=i)return void this.fromRadix(t,i);e=2}this.t=0,this.s=0;for(var r=t.length,n=!1,p=0;--r>=0;){var o=8==e?255&t[r]:intAt(t,r);o<0?"-"==t.charAt(r)&&(n=!0):(n=!1,0==p?this[this.t++]=o:p+e>this.DB?(this[this.t-1]|=(o&(1<<this.DB-p)-1)<<p,this[this.t++]=o>>this.DB-p):this[this.t-1]|=o<<p,(p+=e)>=this.DB&&(p-=this.DB))}8==e&&0!=(128&t[0])&&(this.s=-1,p>0&&(this[this.t-1]|=(1<<this.DB-p)-1<<p)),this.clamp(),n&&BigInteger.ZERO.subTo(this,this)}function bnpClamp(){for(var t=this.s&this.DM;this.t>0&&this[this.t-1]==t;)--this.t}function bnToString(t){if(this.s<0)return"-"+this.negate().toString(t);var i;if(16==t)i=4;else if(8==t)i=3;else if(2==t)i=1;else if(32==t)i=5;else{if(4!=t)return this.toRadix(t);i=2}var e,r=(1<<i)-1,n=!1,p="",o=this.t,l=this.DB-o*this.DB%i;if(o-- >0)for(l<this.DB&&(e=this[o]>>l)>0&&(n=!0,p=int2char(e));o>=0;)l<i?(e=(this[o]&(1<<l)-1)<<i-l,e|=this[--o]>>(l+=this.DB-i)):(e=this[o]>>(l-=i)&r,l<=0&&(l+=this.DB,--o)),e>0&&(n=!0),n&&(p+=int2char(e));return n?p:"0"}function bnNegate(){var t=nbi();return BigInteger.ZERO.subTo(this,t),t}function bnAbs(){return this.s<0?this.negate():this}function bnCompareTo(t){var i=this.s-t.s;if(0!=i)return i;var e=this.t;if(0!=(i=e-t.t))return this.s<0?-i:i;for(;--e>=0;)if(0!=(i=this[e]-t[e]))return i;return 0}function nbits(t){var i,e=1;return 0!=(i=t>>>16)&&(t=i,e+=16),0!=(i=t>>8)&&(t=i,e+=8),0!=(i=t>>4)&&(t=i,e+=4),0!=(i=t>>2)&&(t=i,e+=2),0!=(i=t>>1)&&(t=i,e+=1),e}function bnBitLength(){return this.t<=0?0:this.DB*(this.t-1)+nbits(this[this.t-1]^this.s&this.DM)}function bnpDLShiftTo(t,i){var e;for(e=this.t-1;e>=0;--e)i[e+t]=this[e];for(e=t-1;e>=0;--e)i[e]=0;i.t=this.t+t,i.s=this.s}function bnpDRShiftTo(t,i){for(var e=t;e<this.t;++e)i[e-t]=this[e];i.t=Math.max(this.t-t,0),i.s=this.s}function bnpLShiftTo(t,i){var e,r=t%this.DB,n=this.DB-r,p=(1<<n)-1,o=Math.floor(t/this.DB),l=this.s<<r&this.DM;for(e=this.t-1;e>=0;--e)i[e+o+1]=this[e]>>n|l,l=(this[e]&p)<<r;for(e=o-1;e>=0;--e)i[e]=0;i[o]=l,i.t=this.t+o+1,i.s=this.s,i.clamp()}function bnpRShiftTo(t,i){i.s=this.s;var e=Math.floor(t/this.DB);if(e>=this.t)i.t=0;else{var r=t%this.DB,n=this.DB-r,p=(1<<r)-1;i[0]=this[e]>>r;for(var o=e+1;o<this.t;++o)i[o-e-1]|=(this[o]&p)<<n,i[o-e]=this[o]>>r;r>0&&(i[this.t-e-1]|=(this.s&p)<<n),i.t=this.t-e,i.clamp()}}function bnpSubTo(t,i){for(var e=0,r=0,n=Math.min(t.t,this.t);e<n;)r+=this[e]-t[e],i[e++]=r&this.DM,r>>=this.DB;if(t.t<this.t){for(r-=t.s;e<this.t;)r+=this[e],i[e++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;e<t.t;)r-=t[e],i[e++]=r&this.DM,r>>=this.DB;r-=t.s}i.s=r<0?-1:0,r<-1?i[e++]=this.DV+r:r>0&&(i[e++]=r),i.t=e,i.clamp()}function bnpMultiplyTo(t,i){var e=this.abs(),r=t.abs(),n=e.t;for(i.t=n+r.t;--n>=0;)i[n]=0;for(n=0;n<r.t;++n)i[n+e.t]=e.am(0,r[n],i,n,0,e.t);i.s=0,i.clamp(),this.s!=t.s&&BigInteger.ZERO.subTo(i,i)}function bnpSquareTo(t){for(var i=this.abs(),e=t.t=2*i.t;--e>=0;)t[e]=0;for(e=0;e<i.t-1;++e){var r=i.am(e,i[e],t,2*e,0,1);(t[e+i.t]+=i.am(e+1,2*i[e],t,2*e+1,r,i.t-e-1))>=i.DV&&(t[e+i.t]-=i.DV,t[e+i.t+1]=1)}t.t>0&&(t[t.t-1]+=i.am(e,i[e],t,2*e,0,1)),t.s=0,t.clamp()}function bnpDivRemTo(t,i,e){var r=t.abs();if(!(r.t<=0)){var n=this.abs();if(n.t<r.t)return null!=i&&i.fromInt(0),void(null!=e&&this.copyTo(e));null==e&&(e=nbi());var p=nbi(),o=this.s,l=t.s,s=this.DB-nbits(r[r.t-1]);s>0?(r.lShiftTo(s,p),n.lShiftTo(s,e)):(r.copyTo(p),n.copyTo(e));var h=p.t,u=p[h-1];if(0!=u){var a=u*(1<<this.F1)+(h>1?p[h-2]>>this.F2:0),C=this.FV/a,f=(1<<this.F1)/a,d=1<<this.F2,L=e.t,P=L-h,b=null==i?nbi():i;for(p.dlShiftTo(P,b),e.compareTo(b)>=0&&(e[e.t++]=1,e.subTo(b,e)),BigInteger.ONE.dlShiftTo(h,b),b.subTo(p,p);p.t<h;)p[p.t++]=0;for(;--P>=0;){var m=e[--L]==u?this.DM:Math.floor(e[L]*C+(e[L-1]+d)*f);if((e[L]+=p.am(0,m,e,P,0,h))<m)for(p.dlShiftTo(P,b),e.subTo(b,e);e[L]<--m;)e.subTo(b,e)}null!=i&&(e.drShiftTo(h,i),o!=l&&BigInteger.ZERO.subTo(i,i)),e.t=h,e.clamp(),s>0&&e.rShiftTo(s,e),o<0&&BigInteger.ZERO.subTo(e,e)}}}function bnMod(t){var i=nbi();return this.abs().divRemTo(t,null,i),this.s<0&&i.compareTo(BigInteger.ZERO)>0&&t.subTo(i,i),i}function Classic(t){this.m=t}function cConvert(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t}function cRevert(t){return t}function cReduce(t){t.divRemTo(this.m,null,t)}function cMulTo(t,i,e){t.multiplyTo(i,e),this.reduce(e)}function cSqrTo(t,i){t.squareTo(i),this.reduce(i)}function bnpInvDigit(){if(this.t<1)return 0;var t=this[0];if(0==(1&t))return 0;var i=3&t;return(i=(i=(i=(i=i*(2-(15&t)*i)&15)*(2-(255&t)*i)&255)*(2-((65535&t)*i&65535))&65535)*(2-t*i%this.DV)%this.DV)>0?this.DV-i:-i}function Montgomery(t){this.m=t,this.mp=t.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}function montConvert(t){var i=nbi();return t.abs().dlShiftTo(this.m.t,i),i.divRemTo(this.m,null,i),t.s<0&&i.compareTo(BigInteger.ZERO)>0&&this.m.subTo(i,i),i}function montRevert(t){var i=nbi();return t.copyTo(i),this.reduce(i),i}function montReduce(t){for(;t.t<=this.mt2;)t[t.t++]=0;for(var i=0;i<this.m.t;++i){var e=32767&t[i],r=e*this.mpl+((e*this.mph+(t[i]>>15)*this.mpl&this.um)<<15)&t.DM;for(t[e=i+this.m.t]+=this.m.am(0,r,t,i,0,this.m.t);t[e]>=t.DV;)t[e]-=t.DV,t[++e]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)}function montSqrTo(t,i){t.squareTo(i),this.reduce(i)}function montMulTo(t,i,e){t.multiplyTo(i,e),this.reduce(e)}function bnpIsEven(){return 0==(this.t>0?1&this[0]:this.s)}function bnpExp(t,i){if(t>4294967295||t<1)return BigInteger.ONE;var e=nbi(),r=nbi(),n=i.convert(this),p=nbits(t)-1;for(n.copyTo(e);--p>=0;)if(i.sqrTo(e,r),(t&1<<p)>0)i.mulTo(r,n,e);else{var o=e;e=r,r=o}return i.revert(e)}function bnModPowInt(t,i){var e;return e=t<256||i.isEven()?new Classic(i):new Montgomery(i),this.exp(t,e)}function bnClone(){var t=nbi();return this.copyTo(t),t}function bnIntValue(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]}function bnByteValue(){return 0==this.t?this.s:this[0]<<24>>24}function bnShortValue(){return 0==this.t?this.s:this[0]<<16>>16}function bnpChunkSize(t){return Math.floor(Math.LN2*this.DB/Math.log(t))}function bnSigNum(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1}function bnpToRadix(t){if(null==t&&(t=10),0==this.signum()||t<2||t>36)return"0";var i=this.chunkSize(t),e=Math.pow(t,i),r=nbv(e),n=nbi(),p=nbi(),o="";for(this.divRemTo(r,n,p);n.signum()>0;)o=(e+p.intValue()).toString(t).substr(1)+o,n.divRemTo(r,n,p);return p.intValue().toString(t)+o}function bnpFromRadix(t,i){this.fromInt(0),null==i&&(i=10);for(var e=this.chunkSize(i),r=Math.pow(i,e),n=!1,p=0,o=0,l=0;l<t.length;++l){var s=intAt(t,l);s<0?"-"==t.charAt(l)&&0==this.signum()&&(n=!0):(o=i*o+s,++p>=e&&(this.dMultiply(r),this.dAddOffset(o,0),p=0,o=0))}p>0&&(this.dMultiply(Math.pow(i,p)),this.dAddOffset(o,0)),n&&BigInteger.ZERO.subTo(this,this)}function bnpFromNumber(t,i,e){if("number"==typeof i)if(t<2)this.fromInt(1);else for(this.fromNumber(t,e),this.testBit(t-1)||this.bitwiseTo(BigInteger.ONE.shiftLeft(t-1),op_or,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(i);)this.dAddOffset(2,0),this.bitLength()>t&&this.subTo(BigInteger.ONE.shiftLeft(t-1),this);else{var r=new Array,n=7&t;r.length=1+(t>>3),i.nextBytes(r),n>0?r[0]&=(1<<n)-1:r[0]=0,this.fromString(r,256)}}function bnToByteArray(){var t=this.t,i=new Array;i[0]=this.s;var e,r=this.DB-t*this.DB%8,n=0;if(t-- >0)for(r<this.DB&&(e=this[t]>>r)!=(this.s&this.DM)>>r&&(i[n++]=e|this.s<<this.DB-r);t>=0;)r<8?(e=(this[t]&(1<<r)-1)<<8-r,e|=this[--t]>>(r+=this.DB-8)):(e=this[t]>>(r-=8)&255,r<=0&&(r+=this.DB,--t)),0!=(128&e)&&(e|=-256),0==n&&(128&this.s)!=(128&e)&&++n,(n>0||e!=this.s)&&(i[n++]=e);return i}function bnEquals(t){return 0==this.compareTo(t)}function bnMin(t){return this.compareTo(t)<0?this:t}function bnMax(t){return this.compareTo(t)>0?this:t}function bnpBitwiseTo(t,i,e){var r,n,p=Math.min(t.t,this.t);for(r=0;r<p;++r)e[r]=i(this[r],t[r]);if(t.t<this.t){for(n=t.s&this.DM,r=p;r<this.t;++r)e[r]=i(this[r],n);e.t=this.t}else{for(n=this.s&this.DM,r=p;r<t.t;++r)e[r]=i(n,t[r]);e.t=t.t}e.s=i(this.s,t.s),e.clamp()}function op_and(t,i){return t&i}function bnAnd(t){var i=nbi();return this.bitwiseTo(t,op_and,i),i}function op_or(t,i){return t|i}function bnOr(t){var i=nbi();return this.bitwiseTo(t,op_or,i),i}function op_xor(t,i){return t^i}function bnXor(t){var i=nbi();return this.bitwiseTo(t,op_xor,i),i}function op_andnot(t,i){return t&~i}function bnAndNot(t){var i=nbi();return this.bitwiseTo(t,op_andnot,i),i}function bnNot(){for(var t=nbi(),i=0;i<this.t;++i)t[i]=this.DM&~this[i];return t.t=this.t,t.s=~this.s,t}function bnShiftLeft(t){var i=nbi();return t<0?this.rShiftTo(-t,i):this.lShiftTo(t,i),i}function bnShiftRight(t){var i=nbi();return t<0?this.lShiftTo(-t,i):this.rShiftTo(t,i),i}function lbit(t){if(0==t)return-1;var i=0;return 0==(65535&t)&&(t>>=16,i+=16),0==(255&t)&&(t>>=8,i+=8),0==(15&t)&&(t>>=4,i+=4),0==(3&t)&&(t>>=2,i+=2),0==(1&t)&&++i,i}function bnGetLowestSetBit(){for(var t=0;t<this.t;++t)if(0!=this[t])return t*this.DB+lbit(this[t]);return this.s<0?this.t*this.DB:-1}function cbit(t){for(var i=0;0!=t;)t&=t-1,++i;return i}function bnBitCount(){for(var t=0,i=this.s&this.DM,e=0;e<this.t;++e)t+=cbit(this[e]^i);return t}function bnTestBit(t){var i=Math.floor(t/this.DB);return i>=this.t?0!=this.s:0!=(this[i]&1<<t%this.DB)}function bnpChangeBit(t,i){var e=BigInteger.ONE.shiftLeft(t);return this.bitwiseTo(e,i,e),e}function bnSetBit(t){return this.changeBit(t,op_or)}function bnClearBit(t){return this.changeBit(t,op_andnot)}function bnFlipBit(t){return this.changeBit(t,op_xor)}function bnpAddTo(t,i){for(var e=0,r=0,n=Math.min(t.t,this.t);e<n;)r+=this[e]+t[e],i[e++]=r&this.DM,r>>=this.DB;if(t.t<this.t){for(r+=t.s;e<this.t;)r+=this[e],i[e++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;e<t.t;)r+=t[e],i[e++]=r&this.DM,r>>=this.DB;r+=t.s}i.s=r<0?-1:0,r>0?i[e++]=r:r<-1&&(i[e++]=this.DV+r),i.t=e,i.clamp()}function bnAdd(t){var i=nbi();return this.addTo(t,i),i}function bnSubtract(t){var i=nbi();return this.subTo(t,i),i}function bnMultiply(t){var i=nbi();return this.multiplyTo(t,i),i}function bnSquare(){var t=nbi();return this.squareTo(t),t}function bnDivide(t){var i=nbi();return this.divRemTo(t,i,null),i}function bnRemainder(t){var i=nbi();return this.divRemTo(t,null,i),i}function bnDivideAndRemainder(t){var i=nbi(),e=nbi();return this.divRemTo(t,i,e),new Array(i,e)}function bnpDMultiply(t){this[this.t]=this.am(0,t-1,this,0,0,this.t),++this.t,this.clamp()}function bnpDAddOffset(t,i){if(0!=t){for(;this.t<=i;)this[this.t++]=0;for(this[i]+=t;this[i]>=this.DV;)this[i]-=this.DV,++i>=this.t&&(this[this.t++]=0),++this[i]}}function NullExp(){}function nNop(t){return t}function nMulTo(t,i,e){t.multiplyTo(i,e)}function nSqrTo(t,i){t.squareTo(i)}function bnPow(t){return this.exp(t,new NullExp)}function bnpMultiplyLowerTo(t,i,e){var r,n=Math.min(this.t+t.t,i);for(e.s=0,e.t=n;n>0;)e[--n]=0;for(r=e.t-this.t;n<r;++n)e[n+this.t]=this.am(0,t[n],e,n,0,this.t);for(r=Math.min(t.t,i);n<r;++n)this.am(0,t[n],e,n,0,i-n);e.clamp()}function bnpMultiplyUpperTo(t,i,e){--i;var r=e.t=this.t+t.t-i;for(e.s=0;--r>=0;)e[r]=0;for(r=Math.max(i-this.t,0);r<t.t;++r)e[this.t+r-i]=this.am(i-r,t[r],e,0,0,this.t+r-i);e.clamp(),e.drShiftTo(1,e)}function Barrett(t){this.r2=nbi(),this.q3=nbi(),BigInteger.ONE.dlShiftTo(2*t.t,this.r2),this.mu=this.r2.divide(t),this.m=t}function barrettConvert(t){if(t.s<0||t.t>2*this.m.t)return t.mod(this.m);if(t.compareTo(this.m)<0)return t;var i=nbi();return t.copyTo(i),this.reduce(i),i}function barrettRevert(t){return t}function barrettReduce(t){for(t.drShiftTo(this.m.t-1,this.r2),t.t>this.m.t+1&&(t.t=this.m.t+1,t.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);t.compareTo(this.r2)<0;)t.dAddOffset(1,this.m.t+1);for(t.subTo(this.r2,t);t.compareTo(this.m)>=0;)t.subTo(this.m,t)}function barrettSqrTo(t,i){t.squareTo(i),this.reduce(i)}function barrettMulTo(t,i,e){t.multiplyTo(i,e),this.reduce(e)}function bnModPow(t,i){var e,r,n=t.bitLength(),p=nbv(1);if(n<=0)return p;e=n<18?1:n<48?3:n<144?4:n<768?5:6,r=n<8?new Classic(i):i.isEven()?new Barrett(i):new Montgomery(i);var o=new Array,l=3,s=e-1,h=(1<<e)-1;if(o[1]=r.convert(this),e>1){var u=nbi();for(r.sqrTo(o[1],u);l<=h;)o[l]=nbi(),r.mulTo(u,o[l-2],o[l]),l+=2}var a,C,f=t.t-1,d=!0,L=nbi();for(n=nbits(t[f])-1;f>=0;){for(n>=s?a=t[f]>>n-s&h:(a=(t[f]&(1<<n+1)-1)<<s-n,f>0&&(a|=t[f-1]>>this.DB+n-s)),l=e;0==(1&a);)a>>=1,--l;if((n-=l)<0&&(n+=this.DB,--f),d)o[a].copyTo(p),d=!1;else{for(;l>1;)r.sqrTo(p,L),r.sqrTo(L,p),l-=2;l>0?r.sqrTo(p,L):(C=p,p=L,L=C),r.mulTo(L,o[a],p)}for(;f>=0&&0==(t[f]&1<<n);)r.sqrTo(p,L),C=p,p=L,L=C,--n<0&&(n=this.DB-1,--f)}return r.revert(p)}function bnGCD(t){var i=this.s<0?this.negate():this.clone(),e=t.s<0?t.negate():t.clone();if(i.compareTo(e)<0){var r=i;i=e,e=r}var n=i.getLowestSetBit(),p=e.getLowestSetBit();if(p<0)return i;for(n<p&&(p=n),p>0&&(i.rShiftTo(p,i),e.rShiftTo(p,e));i.signum()>0;)(n=i.getLowestSetBit())>0&&i.rShiftTo(n,i),(n=e.getLowestSetBit())>0&&e.rShiftTo(n,e),i.compareTo(e)>=0?(i.subTo(e,i),i.rShiftTo(1,i)):(e.subTo(i,e),e.rShiftTo(1,e));return p>0&&e.lShiftTo(p,e),e}function bnpModInt(t){if(t<=0)return 0;var i=this.DV%t,e=this.s<0?t-1:0;if(this.t>0)if(0==i)e=this[0]%t;else for(var r=this.t-1;r>=0;--r)e=(i*e+this[r])%t;return e}function bnModInverse(t){var i=t.isEven();if(this.isEven()&&i||0==t.signum())return BigInteger.ZERO;for(var e=t.clone(),r=this.clone(),n=nbv(1),p=nbv(0),o=nbv(0),l=nbv(1);0!=e.signum();){for(;e.isEven();)e.rShiftTo(1,e),i?(n.isEven()&&p.isEven()||(n.addTo(this,n),p.subTo(t,p)),n.rShiftTo(1,n)):p.isEven()||p.subTo(t,p),p.rShiftTo(1,p);for(;r.isEven();)r.rShiftTo(1,r),i?(o.isEven()&&l.isEven()||(o.addTo(this,o),l.subTo(t,l)),o.rShiftTo(1,o)):l.isEven()||l.subTo(t,l),l.rShiftTo(1,l);e.compareTo(r)>=0?(e.subTo(r,e),i&&n.subTo(o,n),p.subTo(l,p)):(r.subTo(e,r),i&&o.subTo(n,o),l.subTo(p,l))}return 0!=r.compareTo(BigInteger.ONE)?BigInteger.ZERO:l.compareTo(t)>=0?l.subtract(t):l.signum()<0?(l.addTo(t,l),l.signum()<0?l.add(t):l):l}Classic.prototype.convert=cConvert,Classic.prototype.revert=cRevert,Classic.prototype.reduce=cReduce,Classic.prototype.mulTo=cMulTo,Classic.prototype.sqrTo=cSqrTo,Montgomery.prototype.convert=montConvert,Montgomery.prototype.revert=montRevert,Montgomery.prototype.reduce=montReduce,Montgomery.prototype.mulTo=montMulTo,Montgomery.prototype.sqrTo=montSqrTo,BigInteger.prototype.copyTo=bnpCopyTo,BigInteger.prototype.fromInt=bnpFromInt,BigInteger.prototype.fromString=bnpFromString,BigInteger.prototype.clamp=bnpClamp,BigInteger.prototype.dlShiftTo=bnpDLShiftTo,BigInteger.prototype.drShiftTo=bnpDRShiftTo,BigInteger.prototype.lShiftTo=bnpLShiftTo,BigInteger.prototype.rShiftTo=bnpRShiftTo,BigInteger.prototype.subTo=bnpSubTo,BigInteger.prototype.multiplyTo=bnpMultiplyTo,BigInteger.prototype.squareTo=bnpSquareTo,BigInteger.prototype.divRemTo=bnpDivRemTo,BigInteger.prototype.invDigit=bnpInvDigit,BigInteger.prototype.isEven=bnpIsEven,BigInteger.prototype.exp=bnpExp,BigInteger.prototype.toString=bnToString,BigInteger.prototype.negate=bnNegate,BigInteger.prototype.abs=bnAbs,BigInteger.prototype.compareTo=bnCompareTo,BigInteger.prototype.bitLength=bnBitLength,BigInteger.prototype.mod=bnMod,BigInteger.prototype.modPowInt=bnModPowInt,BigInteger.ZERO=nbv(0),BigInteger.ONE=nbv(1),NullExp.prototype.convert=nNop,NullExp.prototype.revert=nNop,NullExp.prototype.mulTo=nMulTo,NullExp.prototype.sqrTo=nSqrTo,Barrett.prototype.convert=barrettConvert,Barrett.prototype.revert=barrettRevert,Barrett.prototype.reduce=barrettReduce,Barrett.prototype.mulTo=barrettMulTo,Barrett.prototype.sqrTo=barrettSqrTo;var lowprimes=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],lplim=(1<<26)/lowprimes[lowprimes.length-1];function bnIsProbablePrime(t){var i,e=this.abs();if(1==e.t&&e[0]<=lowprimes[lowprimes.length-1]){for(i=0;i<lowprimes.length;++i)if(e[0]==lowprimes[i])return!0;return!1}if(e.isEven())return!1;for(i=1;i<lowprimes.length;){for(var r=lowprimes[i],n=i+1;n<lowprimes.length&&r<lplim;)r*=lowprimes[n++];for(r=e.modInt(r);i<n;)if(r%lowprimes[i++]==0)return!1}return e.millerRabin(t)}function bnpMillerRabin(t){var i=this.subtract(BigInteger.ONE),e=i.getLowestSetBit();if(e<=0)return!1;var r=i.shiftRight(e);(t=t+1>>1)>lowprimes.length&&(t=lowprimes.length);for(var n=nbi(),p=0;p<t;++p){n.fromInt(lowprimes[Math.floor(Math.random()*lowprimes.length)]);var o=n.modPow(r,this);if(0!=o.compareTo(BigInteger.ONE)&&0!=o.compareTo(i)){for(var l=1;l++<e&&0!=o.compareTo(i);)if(0==(o=o.modPowInt(2,this)).compareTo(BigInteger.ONE))return!1;if(0!=o.compareTo(i))return!1}}return!0}BigInteger.prototype.chunkSize=bnpChunkSize,BigInteger.prototype.toRadix=bnpToRadix,BigInteger.prototype.fromRadix=bnpFromRadix,BigInteger.prototype.fromNumber=bnpFromNumber,BigInteger.prototype.bitwiseTo=bnpBitwiseTo,BigInteger.prototype.changeBit=bnpChangeBit,BigInteger.prototype.addTo=bnpAddTo,BigInteger.prototype.dMultiply=bnpDMultiply,BigInteger.prototype.dAddOffset=bnpDAddOffset,BigInteger.prototype.multiplyLowerTo=bnpMultiplyLowerTo,BigInteger.prototype.multiplyUpperTo=bnpMultiplyUpperTo,BigInteger.prototype.modInt=bnpModInt,BigInteger.prototype.millerRabin=bnpMillerRabin,BigInteger.prototype.clone=bnClone,BigInteger.prototype.intValue=bnIntValue,BigInteger.prototype.byteValue=bnByteValue,BigInteger.prototype.shortValue=bnShortValue,BigInteger.prototype.signum=bnSigNum,BigInteger.prototype.toByteArray=bnToByteArray,BigInteger.prototype.equals=bnEquals,BigInteger.prototype.min=bnMin,BigInteger.prototype.max=bnMax,BigInteger.prototype.and=bnAnd,BigInteger.prototype.or=bnOr,BigInteger.prototype.xor=bnXor,BigInteger.prototype.andNot=bnAndNot,BigInteger.prototype.not=bnNot,BigInteger.prototype.shiftLeft=bnShiftLeft,BigInteger.prototype.shiftRight=bnShiftRight,BigInteger.prototype.getLowestSetBit=bnGetLowestSetBit,BigInteger.prototype.bitCount=bnBitCount,BigInteger.prototype.testBit=bnTestBit,BigInteger.prototype.setBit=bnSetBit,BigInteger.prototype.clearBit=bnClearBit,BigInteger.prototype.flipBit=bnFlipBit,BigInteger.prototype.add=bnAdd,BigInteger.prototype.subtract=bnSubtract,BigInteger.prototype.multiply=bnMultiply,BigInteger.prototype.divide=bnDivide,BigInteger.prototype.remainder=bnRemainder,BigInteger.prototype.divideAndRemainder=bnDivideAndRemainder,BigInteger.prototype.modPow=bnModPow,BigInteger.prototype.modInverse=bnModInverse,BigInteger.prototype.pow=bnPow,BigInteger.prototype.gcd=bnGCD,BigInteger.prototype.isProbablePrime=bnIsProbablePrime,BigInteger.prototype.square=bnSquare;var Int128=BigInteger;if(Int128.prototype.IsNegative=function(){return-1==this.compareTo(Int128.ZERO)},Int128.op_Equality=function(t,i){return 0==t.compareTo(i)},Int128.op_Inequality=function(t,i){return 0!=t.compareTo(i)},Int128.op_GreaterThan=function(t,i){return t.compareTo(i)>0},Int128.op_LessThan=function(t,i){return t.compareTo(i)<0},Int128.op_Addition=function(t,i){return new Int128(t).add(new Int128(i))},Int128.op_Subtraction=function(t,i){return new Int128(t).subtract(new Int128(i))},Int128.Int128Mul=function(t,i){return new Int128(t).multiply(new Int128(i))},Int128.op_Division=function(t,i){return t.divide(i)},Int128.prototype.ToDouble=function(){return parseFloat(this.toString())},void 0===Inherit)var Inherit=function(t,i){var e;if(void 0===Object.getOwnPropertyNames){for(e in i.prototype)void 0!==t.prototype[e]&&t.prototype[e]!=Object.prototype[e]||(t.prototype[e]=i.prototype[e]);for(e in i)void 0===t[e]&&(t[e]=i[e]);t.$baseCtor=i}else{for(var r=Object.getOwnPropertyNames(i.prototype),n=0;n<r.length;n++)void 0===Object.getOwnPropertyDescriptor(t.prototype,r[n])&&Object.defineProperty(t.prototype,r[n],Object.getOwnPropertyDescriptor(i.prototype,r[n]));for(e in i)void 0===t[e]&&(t[e]=i[e]);t.$baseCtor=i}};ClipperLib.Path=function(){return[]},ClipperLib.Paths=function(){return[]},ClipperLib.DoublePoint=function(){var t=arguments;this.X=0,this.Y=0,1==t.length?(this.X=t[0].X,this.Y=t[0].Y):2==t.length&&(this.X=t[0],this.Y=t[1])},ClipperLib.DoublePoint0=function(){this.X=0,this.Y=0},ClipperLib.DoublePoint1=function(t){this.X=t.X,this.Y=t.Y},ClipperLib.DoublePoint2=function(t,i){this.X=t,this.Y=i},ClipperLib.PolyNode=function(){this.m_Parent=null,this.m_polygon=new ClipperLib.Path,this.m_Index=0,this.m_jointype=0,this.m_endtype=0,this.m_Childs=[],this.IsOpen=!1},ClipperLib.PolyNode.prototype.IsHoleNode=function(){for(var t=!0,i=this.m_Parent;null!==i;)t=!t,i=i.m_Parent;return t},ClipperLib.PolyNode.prototype.ChildCount=function(){return this.m_Childs.length},ClipperLib.PolyNode.prototype.Contour=function(){return this.m_polygon},ClipperLib.PolyNode.prototype.AddChild=function(t){var i=this.m_Childs.length;this.m_Childs.push(t),t.m_Parent=this,t.m_Index=i},ClipperLib.PolyNode.prototype.GetNext=function(){return this.m_Childs.length>0?this.m_Childs[0]:this.GetNextSiblingUp()},ClipperLib.PolyNode.prototype.GetNextSiblingUp=function(){return null===this.m_Parent?null:this.m_Index==this.m_Parent.m_Childs.length-1?this.m_Parent.GetNextSiblingUp():this.m_Parent.m_Childs[this.m_Index+1]},ClipperLib.PolyNode.prototype.Childs=function(){return this.m_Childs},ClipperLib.PolyNode.prototype.Parent=function(){return this.m_Parent},ClipperLib.PolyNode.prototype.IsHole=function(){return this.IsHoleNode()},ClipperLib.PolyTree=function(){this.m_AllPolys=[],ClipperLib.PolyNode.call(this)},ClipperLib.PolyTree.prototype.Clear=function(){for(var t=0,i=this.m_AllPolys.length;t<i;t++)this.m_AllPolys[t]=null;this.m_AllPolys.length=0,this.m_Childs.length=0},ClipperLib.PolyTree.prototype.GetFirst=function(){return this.m_Childs.length>0?this.m_Childs[0]:null},ClipperLib.PolyTree.prototype.Total=function(){return this.m_AllPolys.length},Inherit(ClipperLib.PolyTree,ClipperLib.PolyNode),ClipperLib.Math_Abs_Int64=ClipperLib.Math_Abs_Int32=ClipperLib.Math_Abs_Double=function(t){return Math.abs(t)},ClipperLib.Math_Max_Int32_Int32=function(t,i){return Math.max(t,i)},browser.msie||browser.opera||browser.safari?ClipperLib.Cast_Int32=function(t){return 0|t}:ClipperLib.Cast_Int32=function(t){return~~t},browser.chrome?ClipperLib.Cast_Int64=function(t){return t<-2147483648||t>2147483647?t<0?Math.ceil(t):Math.floor(t):~~t}:browser.firefox&&"function"==typeof Number.toInteger?ClipperLib.Cast_Int64=function(t){return Number.toInteger(t)}:browser.msie7||browser.msie8?ClipperLib.Cast_Int64=function(t){return parseInt(t,10)}:browser.msie?ClipperLib.Cast_Int64=function(t){return t<-2147483648||t>2147483647?t<0?Math.ceil(t):Math.floor(t):0|t}:ClipperLib.Cast_Int64=function(t){return t<0?Math.ceil(t):Math.floor(t)},ClipperLib.Clear=function(t){t.length=0},ClipperLib.PI=3.141592653589793,ClipperLib.PI2=6.283185307179586,ClipperLib.IntPoint=function(){var t=arguments,i=t.length;if(this.X=0,this.Y=0,use_xyz)if(this.Z=0,3==i)this.X=t[0],this.Y=t[1],this.Z=t[2];else if(2==i)this.X=t[0],this.Y=t[1],this.Z=0;else if(1==i)if(t[0]instanceof ClipperLib.DoublePoint){var e=t[0];this.X=ClipperLib.Clipper.Round(e.X),this.Y=ClipperLib.Clipper.Round(e.Y),this.Z=0}else{void 0===(r=t[0]).Z&&(r.Z=0),this.X=r.X,this.Y=r.Y,this.Z=r.Z}else this.X=0,this.Y=0,this.Z=0;else if(2==i)this.X=t[0],this.Y=t[1];else if(1==i)if(t[0]instanceof ClipperLib.DoublePoint){e=t[0];this.X=ClipperLib.Clipper.Round(e.X),this.Y=ClipperLib.Clipper.Round(e.Y)}else{var r=t[0];this.X=r.X,this.Y=r.Y}else this.X=0,this.Y=0},ClipperLib.IntPoint.op_Equality=function(t,i){return t.X==i.X&&t.Y==i.Y},ClipperLib.IntPoint.op_Inequality=function(t,i){return t.X!=i.X||t.Y!=i.Y},use_xyz?(ClipperLib.IntPoint0=function(){this.X=0,this.Y=0,this.Z=0},ClipperLib.IntPoint1=function(t){this.X=t.X,this.Y=t.Y,this.Z=t.Z},ClipperLib.IntPoint1dp=function(t){this.X=ClipperLib.Clipper.Round(t.X),this.Y=ClipperLib.Clipper.Round(t.Y),this.Z=0},ClipperLib.IntPoint2=function(t,i){this.X=t,this.Y=i,this.Z=0},ClipperLib.IntPoint3=function(t,i,e){this.X=t,this.Y=i,this.Z=e}):(ClipperLib.IntPoint0=function(){this.X=0,this.Y=0},ClipperLib.IntPoint1=function(t){this.X=t.X,this.Y=t.Y},ClipperLib.IntPoint1dp=function(t){this.X=ClipperLib.Clipper.Round(t.X),this.Y=ClipperLib.Clipper.Round(t.Y)},ClipperLib.IntPoint2=function(t,i){this.X=t,this.Y=i}),ClipperLib.IntRect=function(){var t=arguments,i=t.length;4==i?(this.left=t[0],this.top=t[1],this.right=t[2],this.bottom=t[3]):1==i?(this.left=ir.left,this.top=ir.top,this.right=ir.right,this.bottom=ir.bottom):(this.left=0,this.top=0,this.right=0,this.bottom=0)},ClipperLib.IntRect0=function(){this.left=0,this.top=0,this.right=0,this.bottom=0},ClipperLib.IntRect1=function(t){this.left=t.left,this.top=t.top,this.right=t.right,this.bottom=t.bottom},ClipperLib.IntRect4=function(t,i,e,r){this.left=t,this.top=i,this.right=e,this.bottom=r},ClipperLib.ClipType={ctIntersection:0,ctUnion:1,ctDifference:2,ctXor:3},ClipperLib.PolyType={ptSubject:0,ptClip:1},ClipperLib.PolyFillType={pftEvenOdd:0,pftNonZero:1,pftPositive:2,pftNegative:3},ClipperLib.JoinType={jtSquare:0,jtRound:1,jtMiter:2},ClipperLib.EndType={etOpenSquare:0,etOpenRound:1,etOpenButt:2,etClosedLine:3,etClosedPolygon:4},use_deprecated&&(ClipperLib.EndType_={etSquare:0,etRound:1,etButt:2,etClosed:3}),ClipperLib.EdgeSide={esLeft:0,esRight:1},ClipperLib.Direction={dRightToLeft:0,dLeftToRight:1},ClipperLib.TEdge=function(){this.Bot=new ClipperLib.IntPoint,this.Curr=new ClipperLib.IntPoint,this.Top=new ClipperLib.IntPoint,this.Delta=new ClipperLib.IntPoint,this.Dx=0,this.PolyTyp=ClipperLib.PolyType.ptSubject,this.Side=ClipperLib.EdgeSide.esLeft,this.WindDelta=0,this.WindCnt=0,this.WindCnt2=0,this.OutIdx=0,this.Next=null,this.Prev=null,this.NextInLML=null,this.NextInAEL=null,this.PrevInAEL=null,this.NextInSEL=null,this.PrevInSEL=null},ClipperLib.IntersectNode=function(){this.Edge1=null,this.Edge2=null,this.Pt=new ClipperLib.IntPoint},ClipperLib.MyIntersectNodeSort=function(){},ClipperLib.MyIntersectNodeSort.Compare=function(t,i){return i.Pt.Y-t.Pt.Y},ClipperLib.LocalMinima=function(){this.Y=0,this.LeftBound=null,this.RightBound=null,this.Next=null},ClipperLib.Scanbeam=function(){this.Y=0,this.Next=null},ClipperLib.OutRec=function(){this.Idx=0,this.IsHole=!1,this.IsOpen=!1,this.FirstLeft=null,this.Pts=null,this.BottomPt=null,this.PolyNode=null},ClipperLib.OutPt=function(){this.Idx=0,this.Pt=new ClipperLib.IntPoint,this.Next=null,this.Prev=null},ClipperLib.Join=function(){this.OutPt1=null,this.OutPt2=null,this.OffPt=new ClipperLib.IntPoint},ClipperLib.ClipperBase=function(){this.m_MinimaList=null,this.m_CurrentLM=null,this.m_edges=new Array,this.m_UseFullRange=!1,this.m_HasOpenPaths=!1,this.PreserveCollinear=!1,this.m_MinimaList=null,this.m_CurrentLM=null,this.m_UseFullRange=!1,this.m_HasOpenPaths=!1},ClipperLib.ClipperBase.horizontal=-9007199254740992,ClipperLib.ClipperBase.Skip=-2,ClipperLib.ClipperBase.Unassigned=-1,ClipperLib.ClipperBase.tolerance=1e-20,use_int32?(ClipperLib.ClipperBase.loRange=46340,ClipperLib.ClipperBase.hiRange=46340):(ClipperLib.ClipperBase.loRange=47453132,ClipperLib.ClipperBase.hiRange=0xfffffffffffff),ClipperLib.ClipperBase.near_zero=function(t){return t>-ClipperLib.ClipperBase.tolerance&&t<ClipperLib.ClipperBase.tolerance},ClipperLib.ClipperBase.IsHorizontal=function(t){return 0===t.Delta.Y},ClipperLib.ClipperBase.prototype.PointIsVertex=function(t,i){var e=i;do{if(ClipperLib.IntPoint.op_Equality(e.Pt,t))return!0;e=e.Next}while(e!=i);return!1},ClipperLib.ClipperBase.prototype.PointOnLineSegment=function(t,i,e,r){return r?t.X==i.X&&t.Y==i.Y||t.X==e.X&&t.Y==e.Y||t.X>i.X==t.X<e.X&&t.Y>i.Y==t.Y<e.Y&&Int128.op_Equality(Int128.Int128Mul(t.X-i.X,e.Y-i.Y),Int128.Int128Mul(e.X-i.X,t.Y-i.Y)):t.X==i.X&&t.Y==i.Y||t.X==e.X&&t.Y==e.Y||t.X>i.X==t.X<e.X&&t.Y>i.Y==t.Y<e.Y&&(t.X-i.X)*(e.Y-i.Y)==(e.X-i.X)*(t.Y-i.Y)},ClipperLib.ClipperBase.prototype.PointOnPolygon=function(t,i,e){for(var r=i;;){if(this.PointOnLineSegment(t,r.Pt,r.Next.Pt,e))return!0;if((r=r.Next)==i)break}return!1},ClipperLib.ClipperBase.prototype.SlopesEqual=ClipperLib.ClipperBase.SlopesEqual=function(){var t,i,e,r,n,p,o=arguments,l=o.length;return 3==l?(t=o[0],i=o[1],o[2]?Int128.op_Equality(Int128.Int128Mul(t.Delta.Y,i.Delta.X),Int128.Int128Mul(t.Delta.X,i.Delta.Y)):ClipperLib.Cast_Int64(t.Delta.Y*i.Delta.X)==ClipperLib.Cast_Int64(t.Delta.X*i.Delta.Y)):4==l?(e=o[0],r=o[1],n=o[2],o[3]?Int128.op_Equality(Int128.Int128Mul(e.Y-r.Y,r.X-n.X),Int128.Int128Mul(e.X-r.X,r.Y-n.Y)):ClipperLib.Cast_Int64((e.Y-r.Y)*(r.X-n.X))-ClipperLib.Cast_Int64((e.X-r.X)*(r.Y-n.Y))==0):(e=o[0],r=o[1],n=o[2],p=o[3],o[4]?Int128.op_Equality(Int128.Int128Mul(e.Y-r.Y,n.X-p.X),Int128.Int128Mul(e.X-r.X,n.Y-p.Y)):ClipperLib.Cast_Int64((e.Y-r.Y)*(n.X-p.X))-ClipperLib.Cast_Int64((e.X-r.X)*(n.Y-p.Y))==0)},ClipperLib.ClipperBase.SlopesEqual3=function(t,i,e){return e?Int128.op_Equality(Int128.Int128Mul(t.Delta.Y,i.Delta.X),Int128.Int128Mul(t.Delta.X,i.Delta.Y)):ClipperLib.Cast_Int64(t.Delta.Y*i.Delta.X)==ClipperLib.Cast_Int64(t.Delta.X*i.Delta.Y)},ClipperLib.ClipperBase.SlopesEqual4=function(t,i,e,r){return r?Int128.op_Equality(Int128.Int128Mul(t.Y-i.Y,i.X-e.X),Int128.Int128Mul(t.X-i.X,i.Y-e.Y)):ClipperLib.Cast_Int64((t.Y-i.Y)*(i.X-e.X))-ClipperLib.Cast_Int64((t.X-i.X)*(i.Y-e.Y))==0},ClipperLib.ClipperBase.SlopesEqual5=function(t,i,e,r,n){return n?Int128.op_Equality(Int128.Int128Mul(t.Y-i.Y,e.X-r.X),Int128.Int128Mul(t.X-i.X,e.Y-r.Y)):ClipperLib.Cast_Int64((t.Y-i.Y)*(e.X-r.X))-ClipperLib.Cast_Int64((t.X-i.X)*(e.Y-r.Y))==0},ClipperLib.ClipperBase.prototype.Clear=function(){this.DisposeLocalMinimaList();for(var t=0,i=this.m_edges.length;t<i;++t){for(var e=0,r=this.m_edges[t].length;e<r;++e)this.m_edges[t][e]=null;ClipperLib.Clear(this.m_edges[t])}ClipperLib.Clear(this.m_edges),this.m_UseFullRange=!1,this.m_HasOpenPaths=!1},ClipperLib.ClipperBase.prototype.DisposeLocalMinimaList=function(){for(;null!==this.m_MinimaList;){var t=this.m_MinimaList.Next;this.m_MinimaList=null,this.m_MinimaList=t}this.m_CurrentLM=null},ClipperLib.ClipperBase.prototype.RangeTest=function(t,i){i.Value?(t.X>ClipperLib.ClipperBase.hiRange||t.Y>ClipperLib.ClipperBase.hiRange||-t.X>ClipperLib.ClipperBase.hiRange||-t.Y>ClipperLib.ClipperBase.hiRange)&&ClipperLib.Error("Coordinate outside allowed range in RangeTest()."):(t.X>ClipperLib.ClipperBase.loRange||t.Y>ClipperLib.ClipperBase.loRange||-t.X>ClipperLib.ClipperBase.loRange||-t.Y>ClipperLib.ClipperBase.loRange)&&(i.Value=!0,this.RangeTest(t,i))},ClipperLib.ClipperBase.prototype.InitEdge=function(t,i,e,r){t.Next=i,t.Prev=e,t.Curr.X=r.X,t.Curr.Y=r.Y,t.OutIdx=-1},ClipperLib.ClipperBase.prototype.InitEdge2=function(t,i){t.Curr.Y>=t.Next.Curr.Y?(t.Bot.X=t.Curr.X,t.Bot.Y=t.Curr.Y,t.Top.X=t.Next.Curr.X,t.Top.Y=t.Next.Curr.Y):(t.Top.X=t.Curr.X,t.Top.Y=t.Curr.Y,t.Bot.X=t.Next.Curr.X,t.Bot.Y=t.Next.Curr.Y),this.SetDx(t),t.PolyTyp=i},ClipperLib.ClipperBase.prototype.FindNextLocMin=function(t){for(var i;;){for(;ClipperLib.IntPoint.op_Inequality(t.Bot,t.Prev.Bot)||ClipperLib.IntPoint.op_Equality(t.Curr,t.Top);)t=t.Next;if(t.Dx!=ClipperLib.ClipperBase.horizontal&&t.Prev.Dx!=ClipperLib.ClipperBase.horizontal)break;for(;t.Prev.Dx==ClipperLib.ClipperBase.horizontal;)t=t.Prev;for(i=t;t.Dx==ClipperLib.ClipperBase.horizontal;)t=t.Next;if(t.Top.Y!=t.Prev.Bot.Y){i.Prev.Bot.X<t.Bot.X&&(t=i);break}}return t},ClipperLib.ClipperBase.prototype.ProcessBound=function(t,i){var e,r,n=t,p=t;if(t.Dx==ClipperLib.ClipperBase.horizontal&&(r=i?t.Prev.Bot.X:t.Next.Bot.X,t.Bot.X!=r&&this.ReverseHorizontal(t)),p.OutIdx!=ClipperLib.ClipperBase.Skip)if(i){for(;p.Top.Y==p.Next.Bot.Y&&p.Next.OutIdx!=ClipperLib.ClipperBase.Skip;)p=p.Next;if(p.Dx==ClipperLib.ClipperBase.horizontal&&p.Next.OutIdx!=ClipperLib.ClipperBase.Skip){for(e=p;e.Prev.Dx==ClipperLib.ClipperBase.horizontal;)e=e.Prev;e.Prev.Top.X==p.Next.Top.X?i||(p=e.Prev):e.Prev.Top.X>p.Next.Top.X&&(p=e.Prev)}for(;t!=p;)t.NextInLML=t.Next,t.Dx==ClipperLib.ClipperBase.horizontal&&t!=n&&t.Bot.X!=t.Prev.Top.X&&this.ReverseHorizontal(t),t=t.Next;t.Dx==ClipperLib.ClipperBase.horizontal&&t!=n&&t.Bot.X!=t.Prev.Top.X&&this.ReverseHorizontal(t),p=p.Next}else{for(;p.Top.Y==p.Prev.Bot.Y&&p.Prev.OutIdx!=ClipperLib.ClipperBase.Skip;)p=p.Prev;if(p.Dx==ClipperLib.ClipperBase.horizontal&&p.Prev.OutIdx!=ClipperLib.ClipperBase.Skip){for(e=p;e.Next.Dx==ClipperLib.ClipperBase.horizontal;)e=e.Next;e.Next.Top.X==p.Prev.Top.X?i||(p=e.Next):e.Next.Top.X>p.Prev.Top.X&&(p=e.Next)}for(;t!=p;)t.NextInLML=t.Prev,t.Dx==ClipperLib.ClipperBase.horizontal&&t!=n&&t.Bot.X!=t.Next.Top.X&&this.ReverseHorizontal(t),t=t.Prev;t.Dx==ClipperLib.ClipperBase.horizontal&&t!=n&&t.Bot.X!=t.Next.Top.X&&this.ReverseHorizontal(t),p=p.Prev}if(p.OutIdx==ClipperLib.ClipperBase.Skip){if(t=p,i){for(;t.Top.Y==t.Next.Bot.Y;)t=t.Next;for(;t!=p&&t.Dx==ClipperLib.ClipperBase.horizontal;)t=t.Prev}else{for(;t.Top.Y==t.Prev.Bot.Y;)t=t.Prev;for(;t!=p&&t.Dx==ClipperLib.ClipperBase.horizontal;)t=t.Next}if(t==p)p=i?t.Next:t.Prev;else{t=i?p.Next:p.Prev;var o=new ClipperLib.LocalMinima;o.Next=null,o.Y=t.Bot.Y,o.LeftBound=null,o.RightBound=t,o.RightBound.WindDelta=0,p=this.ProcessBound(o.RightBound,i),this.InsertLocalMinima(o)}}return p},ClipperLib.ClipperBase.prototype.AddPath=function(t,i,e){use_lines?e||i!=ClipperLib.PolyType.ptClip||ClipperLib.Error("AddPath: Open paths must be subject."):e||ClipperLib.Error("AddPath: Open paths have been disabled.");var r=t.length-1;if(e)for(;r>0&&ClipperLib.IntPoint.op_Equality(t[r],t[0]);)--r;for(;r>0&&ClipperLib.IntPoint.op_Equality(t[r],t[r-1]);)--r;if(e&&r<2||!e&&r<1)return!1;for(var n=new Array,p=0;p<=r;p++)n.push(new ClipperLib.TEdge);var o=!0;n[1].Curr.X=t[1].X,n[1].Curr.Y=t[1].Y;var l={Value:this.m_UseFullRange};this.RangeTest(t[0],l),this.m_UseFullRange=l.Value,l.Value=this.m_UseFullRange,this.RangeTest(t[r],l),this.m_UseFullRange=l.Value,this.InitEdge(n[0],n[1],n[r],t[0]),this.InitEdge(n[r],n[0],n[r-1],t[r]);for(p=r-1;p>=1;--p)l.Value=this.m_UseFullRange,this.RangeTest(t[p],l),this.m_UseFullRange=l.Value,this.InitEdge(n[p],n[p+1],n[p-1],t[p]);for(var s=n[0],h=s,u=s;;)if(ClipperLib.IntPoint.op_Equality(h.Curr,h.Next.Curr)){if(h==h.Next)break;h==s&&(s=h.Next),u=h=this.RemoveEdge(h)}else{if(h.Prev==h.Next)break;if(!e||!ClipperLib.ClipperBase.SlopesEqual(h.Prev.Curr,h.Curr,h.Next.Curr,this.m_UseFullRange)||this.PreserveCollinear&&this.Pt2IsBetweenPt1AndPt3(h.Prev.Curr,h.Curr,h.Next.Curr)){if((h=h.Next)==u)break}else h==s&&(s=h.Next),u=h=(h=this.RemoveEdge(h)).Prev}if(!e&&h==h.Next||e&&h.Prev==h.Next)return!1;e||(this.m_HasOpenPaths=!0,s.Prev.OutIdx=ClipperLib.ClipperBase.Skip);var a;h=s;do{this.InitEdge2(h,i),h=h.Next,o&&h.Curr.Y!=s.Curr.Y&&(o=!1)}while(h!=s);if(o){if(e)return!1;for(h.Prev.OutIdx=ClipperLib.ClipperBase.Skip,h.Prev.Bot.X<h.Prev.Top.X&&this.ReverseHorizontal(h.Prev),(f=new ClipperLib.LocalMinima).Next=null,f.Y=h.Bot.Y,f.LeftBound=null,f.RightBound=h,f.RightBound.Side=ClipperLib.EdgeSide.esRight,f.RightBound.WindDelta=0;h.Next.OutIdx!=ClipperLib.ClipperBase.Skip;)h.NextInLML=h.Next,h.Bot.X!=h.Prev.Top.X&&this.ReverseHorizontal(h),h=h.Next;return this.InsertLocalMinima(f),this.m_edges.push(n),!0}this.m_edges.push(n);for(var C=null;(h=this.FindNextLocMin(h))!=C;){var f;null==C&&(C=h),(f=new ClipperLib.LocalMinima).Next=null,f.Y=h.Bot.Y,h.Dx<h.Prev.Dx?(f.LeftBound=h.Prev,f.RightBound=h,a=!1):(f.LeftBound=h,f.RightBound=h.Prev,a=!0),f.LeftBound.Side=ClipperLib.EdgeSide.esLeft,f.RightBound.Side=ClipperLib.EdgeSide.esRight,e?f.LeftBound.Next==f.RightBound?f.LeftBound.WindDelta=-1:f.LeftBound.WindDelta=1:f.LeftBound.WindDelta=0,f.RightBound.WindDelta=-f.LeftBound.WindDelta,h=this.ProcessBound(f.LeftBound,a);var d=this.ProcessBound(f.RightBound,!a);f.LeftBound.OutIdx==ClipperLib.ClipperBase.Skip?f.LeftBound=null:f.RightBound.OutIdx==ClipperLib.ClipperBase.Skip&&(f.RightBound=null),this.InsertLocalMinima(f),a||(h=d)}return!0},ClipperLib.ClipperBase.prototype.AddPaths=function(t,i,e){for(var r=!1,n=0,p=t.length;n<p;++n)this.AddPath(t[n],i,e)&&(r=!0);return r},ClipperLib.ClipperBase.prototype.Pt2IsBetweenPt1AndPt3=function(t,i,e){return!(ClipperLib.IntPoint.op_Equality(t,e)||ClipperLib.IntPoint.op_Equality(t,i)||ClipperLib.IntPoint.op_Equality(e,i))&&(t.X!=e.X?i.X>t.X==i.X<e.X:i.Y>t.Y==i.Y<e.Y)},ClipperLib.ClipperBase.prototype.RemoveEdge=function(t){t.Prev.Next=t.Next,t.Next.Prev=t.Prev;var i=t.Next;return t.Prev=null,i},ClipperLib.ClipperBase.prototype.SetDx=function(t){t.Delta.X=t.Top.X-t.Bot.X,t.Delta.Y=t.Top.Y-t.Bot.Y,0===t.Delta.Y?t.Dx=ClipperLib.ClipperBase.horizontal:t.Dx=t.Delta.X/t.Delta.Y},ClipperLib.ClipperBase.prototype.InsertLocalMinima=function(t){if(null===this.m_MinimaList)this.m_MinimaList=t;else if(t.Y>=this.m_MinimaList.Y)t.Next=this.m_MinimaList,this.m_MinimaList=t;else{for(var i=this.m_MinimaList;null!==i.Next&&t.Y<i.Next.Y;)i=i.Next;t.Next=i.Next,i.Next=t}},ClipperLib.ClipperBase.prototype.PopLocalMinima=function(){null!==this.m_CurrentLM&&(this.m_CurrentLM=this.m_CurrentLM.Next)},ClipperLib.ClipperBase.prototype.ReverseHorizontal=function(t){var i=t.Top.X;t.Top.X=t.Bot.X,t.Bot.X=i,use_xyz&&(i=t.Top.Z,t.Top.Z=t.Bot.Z,t.Bot.Z=i)},ClipperLib.ClipperBase.prototype.Reset=function(){if(this.m_CurrentLM=this.m_MinimaList,null!=this.m_CurrentLM)for(var t=this.m_MinimaList;null!=t;){var i=t.LeftBound;null!=i&&(i.Curr.X=i.Bot.X,i.Curr.Y=i.Bot.Y,i.Side=ClipperLib.EdgeSide.esLeft,i.OutIdx=ClipperLib.ClipperBase.Unassigned),null!=(i=t.RightBound)&&(i.Curr.X=i.Bot.X,i.Curr.Y=i.Bot.Y,i.Side=ClipperLib.EdgeSide.esRight,i.OutIdx=ClipperLib.ClipperBase.Unassigned),t=t.Next}},ClipperLib.Clipper=function(t){void 0===t&&(t=0),this.m_PolyOuts=null,this.m_ClipType=ClipperLib.ClipType.ctIntersection,this.m_Scanbeam=null,this.m_ActiveEdges=null,this.m_SortedEdges=null,this.m_IntersectList=null,this.m_IntersectNodeComparer=null,this.m_ExecuteLocked=!1,this.m_ClipFillType=ClipperLib.PolyFillType.pftEvenOdd,this.m_SubjFillType=ClipperLib.PolyFillType.pftEvenOdd,this.m_Joins=null,this.m_GhostJoins=null,this.m_UsingPolyTree=!1,this.ReverseSolution=!1,this.StrictlySimple=!1,ClipperLib.ClipperBase.call(this),this.m_Scanbeam=null,this.m_ActiveEdges=null,this.m_SortedEdges=null,this.m_IntersectList=new Array,this.m_IntersectNodeComparer=ClipperLib.MyIntersectNodeSort.Compare,this.m_ExecuteLocked=!1,this.m_UsingPolyTree=!1,this.m_PolyOuts=new Array,this.m_Joins=new Array,this.m_GhostJoins=new Array,this.ReverseSolution=0!=(1&t),this.StrictlySimple=0!=(2&t),this.PreserveCollinear=0!=(4&t),use_xyz&&(this.ZFillFunction=null)},ClipperLib.Clipper.ioReverseSolution=1,ClipperLib.Clipper.ioStrictlySimple=2,ClipperLib.Clipper.ioPreserveCollinear=4,ClipperLib.Clipper.prototype.Clear=function(){0!==this.m_edges.length&&(this.DisposeAllPolyPts(),ClipperLib.ClipperBase.prototype.Clear.call(this))},ClipperLib.Clipper.prototype.DisposeScanbeamList=function(){for(;null!==this.m_Scanbeam;){var t=this.m_Scanbeam.Next;this.m_Scanbeam=null,this.m_Scanbeam=t}},ClipperLib.Clipper.prototype.Reset=function(){ClipperLib.ClipperBase.prototype.Reset.call(this),this.m_Scanbeam=null,this.m_ActiveEdges=null,this.m_SortedEdges=null;for(var t=this.m_MinimaList;null!==t;)this.InsertScanbeam(t.Y),t=t.Next},ClipperLib.Clipper.prototype.InsertScanbeam=function(t){if(null===this.m_Scanbeam)this.m_Scanbeam=new ClipperLib.Scanbeam,this.m_Scanbeam.Next=null,this.m_Scanbeam.Y=t;else if(t>this.m_Scanbeam.Y){(e=new ClipperLib.Scanbeam).Y=t,e.Next=this.m_Scanbeam,this.m_Scanbeam=e}else{for(var i=this.m_Scanbeam;null!==i.Next&&t<=i.Next.Y;)i=i.Next;if(t==i.Y)return;var e;(e=new ClipperLib.Scanbeam).Y=t,e.Next=i.Next,i.Next=e}},ClipperLib.Clipper.prototype.Execute=function(){var t=arguments,i=t.length,e=t[1]instanceof ClipperLib.PolyTree;if(4==i&&!e){var r=t[0],n=t[1],p=t[2],o=t[3];if(this.m_ExecuteLocked)return!1;this.m_HasOpenPaths&&ClipperLib.Error("Error: PolyTree struct is need for open path clipping."),this.m_ExecuteLocked=!0,ClipperLib.Clear(n),this.m_SubjFillType=p,this.m_ClipFillType=o,this.m_ClipType=r,this.m_UsingPolyTree=!1;try{(s=this.ExecuteInternal())&&this.BuildResult(n)}finally{this.DisposeAllPolyPts(),this.m_ExecuteLocked=!1}return s}if(4==i&&e){r=t[0];var l=t[1];p=t[2],o=t[3];if(this.m_ExecuteLocked)return!1;this.m_ExecuteLocked=!0,this.m_SubjFillType=p,this.m_ClipFillType=o,this.m_ClipType=r,this.m_UsingPolyTree=!0;try{var s;(s=this.ExecuteInternal())&&this.BuildResult2(l)}finally{this.DisposeAllPolyPts(),this.m_ExecuteLocked=!1}return s}if(2==i&&!e){r=t[0],n=t[1];return this.Execute(r,n,ClipperLib.PolyFillType.pftEvenOdd,ClipperLib.PolyFillType.pftEvenOdd)}if(2==i&&e){r=t[0],l=t[1];return this.Execute(r,l,ClipperLib.PolyFillType.pftEvenOdd,ClipperLib.PolyFillType.pftEvenOdd)}},ClipperLib.Clipper.prototype.FixHoleLinkage=function(t){if(null!==t.FirstLeft&&(t.IsHole==t.FirstLeft.IsHole||null===t.FirstLeft.Pts)){for(var i=t.FirstLeft;null!==i&&(i.IsHole==t.IsHole||null===i.Pts);)i=i.FirstLeft;t.FirstLeft=i}},ClipperLib.Clipper.prototype.ExecuteInternal=function(){try{if(this.Reset(),null===this.m_CurrentLM)return!1;var t=this.PopScanbeam();do{if(this.InsertLocalMinimaIntoAEL(t),ClipperLib.Clear(this.m_GhostJoins),this.ProcessHorizontals(!1),null===this.m_Scanbeam)break;var i=this.PopScanbeam();if(!this.ProcessIntersections(t,i))return!1;this.ProcessEdgesAtTopOfScanbeam(i),t=i}while(null!==this.m_Scanbeam||null!==this.m_CurrentLM);for(var e=0,r=this.m_PolyOuts.length;e<r;e++){null===(n=this.m_PolyOuts[e]).Pts||n.IsOpen||(n.IsHole^this.ReverseSolution)==this.Area(n)>0&&this.ReversePolyPtLinks(n.Pts)}this.JoinCommonEdges();for(e=0,r=this.m_PolyOuts.length;e<r;e++){var n;null===(n=this.m_PolyOuts[e]).Pts||n.IsOpen||this.FixupOutPolygon(n)}return this.StrictlySimple&&this.DoSimplePolygons(),!0}finally{ClipperLib.Clear(this.m_Joins),ClipperLib.Clear(this.m_GhostJoins)}},ClipperLib.Clipper.prototype.PopScanbeam=function(){var t=this.m_Scanbeam.Y;this.m_Scanbeam;return this.m_Scanbeam=this.m_Scanbeam.Next,null,t},ClipperLib.Clipper.prototype.DisposeAllPolyPts=function(){for(var t=0,i=this.m_PolyOuts.length;t<i;++t)this.DisposeOutRec(t);ClipperLib.Clear(this.m_PolyOuts)},ClipperLib.Clipper.prototype.DisposeOutRec=function(t){var i=this.m_PolyOuts[t];null!==i.Pts&&this.DisposeOutPts(i.Pts),i=null,this.m_PolyOuts[t]=null},ClipperLib.Clipper.prototype.DisposeOutPts=function(t){if(null!==t){for(t.Prev.Next=null;null!==t;)t,t=t.Next,null}},ClipperLib.Clipper.prototype.AddJoin=function(t,i,e){var r=new ClipperLib.Join;r.OutPt1=t,r.OutPt2=i,r.OffPt.X=e.X,r.OffPt.Y=e.Y,this.m_Joins.push(r)},ClipperLib.Clipper.prototype.AddGhostJoin=function(t,i){var e=new ClipperLib.Join;e.OutPt1=t,e.OffPt.X=i.X,e.OffPt.Y=i.Y,this.m_GhostJoins.push(e)},use_xyz&&(ClipperLib.Clipper.prototype.SetZ=function(t,i){t.Z=0,null!==this.ZFillFunction&&(i.OutIdx<0?this.ZFillFunction(i.Bot,i.Top,t):this.ZFillFunction(i.Top,i.Bot,t))}),ClipperLib.Clipper.prototype.InsertLocalMinimaIntoAEL=function(t){for(;null!==this.m_CurrentLM&&this.m_CurrentLM.Y==t;){var i=this.m_CurrentLM.LeftBound,e=this.m_CurrentLM.RightBound;this.PopLocalMinima();var r=null;if(null===i?(this.InsertEdgeIntoAEL(e,null),this.SetWindingCount(e),this.IsContributing(e)&&(r=this.AddOutPt(e,e.Bot))):null==e?(this.InsertEdgeIntoAEL(i,null),this.SetWindingCount(i),this.IsContributing(i)&&(r=this.AddOutPt(i,i.Bot)),this.InsertScanbeam(i.Top.Y)):(this.InsertEdgeIntoAEL(i,null),this.InsertEdgeIntoAEL(e,i),this.SetWindingCount(i),e.WindCnt=i.WindCnt,e.WindCnt2=i.WindCnt2,this.IsContributing(i)&&(r=this.AddLocalMinPoly(i,e,i.Bot)),this.InsertScanbeam(i.Top.Y)),null!=e&&(ClipperLib.ClipperBase.IsHorizontal(e)?this.AddEdgeToSEL(e):this.InsertScanbeam(e.Top.Y)),null!=i&&null!=e){if(null!==r&&ClipperLib.ClipperBase.IsHorizontal(e)&&this.m_GhostJoins.length>0&&0!==e.WindDelta)for(var n=0,p=this.m_GhostJoins.length;n<p;n++){var o=this.m_GhostJoins[n];this.HorzSegmentsOverlap(o.OutPt1.Pt,o.OffPt,e.Bot,e.Top)&&this.AddJoin(o.OutPt1,r,o.OffPt)}if(i.OutIdx>=0&&null!==i.PrevInAEL&&i.PrevInAEL.Curr.X==i.Bot.X&&i.PrevInAEL.OutIdx>=0&&ClipperLib.ClipperBase.SlopesEqual(i.PrevInAEL,i,this.m_UseFullRange)&&0!==i.WindDelta&&0!==i.PrevInAEL.WindDelta){var l=this.AddOutPt(i.PrevInAEL,i.Bot);this.AddJoin(r,l,i.Top)}if(i.NextInAEL!=e){if(e.OutIdx>=0&&e.PrevInAEL.OutIdx>=0&&ClipperLib.ClipperBase.SlopesEqual(e.PrevInAEL,e,this.m_UseFullRange)&&0!==e.WindDelta&&0!==e.PrevInAEL.WindDelta){l=this.AddOutPt(e.PrevInAEL,e.Bot);this.AddJoin(r,l,e.Top)}var s=i.NextInAEL;if(null!==s)for(;s!=e;)this.IntersectEdges(e,s,i.Curr,!1),s=s.NextInAEL}}}},ClipperLib.Clipper.prototype.InsertEdgeIntoAEL=function(t,i){if(null===this.m_ActiveEdges)t.PrevInAEL=null,t.NextInAEL=null,this.m_ActiveEdges=t;else if(null===i&&this.E2InsertsBeforeE1(this.m_ActiveEdges,t))t.PrevInAEL=null,t.NextInAEL=this.m_ActiveEdges,this.m_ActiveEdges.PrevInAEL=t,this.m_ActiveEdges=t;else{for(null===i&&(i=this.m_ActiveEdges);null!==i.NextInAEL&&!this.E2InsertsBeforeE1(i.NextInAEL,t);)i=i.NextInAEL;t.NextInAEL=i.NextInAEL,null!==i.NextInAEL&&(i.NextInAEL.PrevInAEL=t),t.PrevInAEL=i,i.NextInAEL=t}},ClipperLib.Clipper.prototype.E2InsertsBeforeE1=function(t,i){return i.Curr.X==t.Curr.X?i.Top.Y>t.Top.Y?i.Top.X<ClipperLib.Clipper.TopX(t,i.Top.Y):t.Top.X>ClipperLib.Clipper.TopX(i,t.Top.Y):i.Curr.X<t.Curr.X},ClipperLib.Clipper.prototype.IsEvenOddFillType=function(t){return t.PolyTyp==ClipperLib.PolyType.ptSubject?this.m_SubjFillType==ClipperLib.PolyFillType.pftEvenOdd:this.m_ClipFillType==ClipperLib.PolyFillType.pftEvenOdd},ClipperLib.Clipper.prototype.IsEvenOddAltFillType=function(t){return t.PolyTyp==ClipperLib.PolyType.ptSubject?this.m_ClipFillType==ClipperLib.PolyFillType.pftEvenOdd:this.m_SubjFillType==ClipperLib.PolyFillType.pftEvenOdd},ClipperLib.Clipper.prototype.IsContributing=function(t){var i,e;switch(t.PolyTyp==ClipperLib.PolyType.ptSubject?(i=this.m_SubjFillType,e=this.m_ClipFillType):(i=this.m_ClipFillType,e=this.m_SubjFillType),i){case ClipperLib.PolyFillType.pftEvenOdd:if(0===t.WindDelta&&1!=t.WindCnt)return!1;break;case ClipperLib.PolyFillType.pftNonZero:if(1!=Math.abs(t.WindCnt))return!1;break;case ClipperLib.PolyFillType.pftPositive:if(1!=t.WindCnt)return!1;break;default:if(-1!=t.WindCnt)return!1}switch(this.m_ClipType){case ClipperLib.ClipType.ctIntersection:switch(e){case ClipperLib.PolyFillType.pftEvenOdd:case ClipperLib.PolyFillType.pftNonZero:return 0!==t.WindCnt2;case ClipperLib.PolyFillType.pftPositive:return t.WindCnt2>0;default:return t.WindCnt2<0}case ClipperLib.ClipType.ctUnion:switch(e){case ClipperLib.PolyFillType.pftEvenOdd:case ClipperLib.PolyFillType.pftNonZero:return 0===t.WindCnt2;case ClipperLib.PolyFillType.pftPositive:return t.WindCnt2<=0;default:return t.WindCnt2>=0}case ClipperLib.ClipType.ctDifference:if(t.PolyTyp==ClipperLib.PolyType.ptSubject)switch(e){case ClipperLib.PolyFillType.pftEvenOdd:case ClipperLib.PolyFillType.pftNonZero:return 0===t.WindCnt2;case ClipperLib.PolyFillType.pftPositive:return t.WindCnt2<=0;default:return t.WindCnt2>=0}else switch(e){case ClipperLib.PolyFillType.pftEvenOdd:case ClipperLib.PolyFillType.pftNonZero:return 0!==t.WindCnt2;case ClipperLib.PolyFillType.pftPositive:return t.WindCnt2>0;default:return t.WindCnt2<0}case ClipperLib.ClipType.ctXor:if(0!==t.WindDelta)return!0;switch(e){case ClipperLib.PolyFillType.pftEvenOdd:case ClipperLib.PolyFillType.pftNonZero:return 0===t.WindCnt2;case ClipperLib.PolyFillType.pftPositive:return t.WindCnt2<=0;default:return t.WindCnt2>=0}}return!0},ClipperLib.Clipper.prototype.SetWindingCount=function(t){for(var i=t.PrevInAEL;null!==i&&(i.PolyTyp!=t.PolyTyp||0===i.WindDelta);)i=i.PrevInAEL;if(null===i)t.WindCnt=0===t.WindDelta?1:t.WindDelta,t.WindCnt2=0,i=this.m_ActiveEdges;else if(0===t.WindDelta&&this.m_ClipType!=ClipperLib.ClipType.ctUnion)t.WindCnt=1,t.WindCnt2=i.WindCnt2,i=i.NextInAEL;else if(this.IsEvenOddFillType(t)){if(0===t.WindDelta){for(var e=!0,r=i.PrevInAEL;null!==r;)r.PolyTyp==i.PolyTyp&&0!==r.WindDelta&&(e=!e),r=r.PrevInAEL;t.WindCnt=e?0:1}else t.WindCnt=t.WindDelta;t.WindCnt2=i.WindCnt2,i=i.NextInAEL}else i.WindCnt*i.WindDelta<0?Math.abs(i.WindCnt)>1?i.WindDelta*t.WindDelta<0?t.WindCnt=i.WindCnt:t.WindCnt=i.WindCnt+t.WindDelta:t.WindCnt=0===t.WindDelta?1:t.WindDelta:0===t.WindDelta?t.WindCnt=i.WindCnt<0?i.WindCnt-1:i.WindCnt+1:i.WindDelta*t.WindDelta<0?t.WindCnt=i.WindCnt:t.WindCnt=i.WindCnt+t.WindDelta,t.WindCnt2=i.WindCnt2,i=i.NextInAEL;if(this.IsEvenOddAltFillType(t))for(;i!=t;)0!==i.WindDelta&&(t.WindCnt2=0===t.WindCnt2?1:0),i=i.NextInAEL;else for(;i!=t;)t.WindCnt2+=i.WindDelta,i=i.NextInAEL},ClipperLib.Clipper.prototype.AddEdgeToSEL=function(t){null===this.m_SortedEdges?(this.m_SortedEdges=t,t.PrevInSEL=null,t.NextInSEL=null):(t.NextInSEL=this.m_SortedEdges,t.PrevInSEL=null,this.m_SortedEdges.PrevInSEL=t,this.m_SortedEdges=t)},ClipperLib.Clipper.prototype.CopyAELToSEL=function(){var t=this.m_ActiveEdges;for(this.m_SortedEdges=t;null!==t;)t.PrevInSEL=t.PrevInAEL,t.NextInSEL=t.NextInAEL,t=t.NextInAEL},ClipperLib.Clipper.prototype.SwapPositionsInAEL=function(t,i){if(t.NextInAEL!=t.PrevInAEL&&i.NextInAEL!=i.PrevInAEL){if(t.NextInAEL==i)null!==(e=i.NextInAEL)&&(e.PrevInAEL=t),null!==(r=t.PrevInAEL)&&(r.NextInAEL=i),i.PrevInAEL=r,i.NextInAEL=t,t.PrevInAEL=i,t.NextInAEL=e;else if(i.NextInAEL==t){null!==(e=t.NextInAEL)&&(e.PrevInAEL=i),null!==(r=i.PrevInAEL)&&(r.NextInAEL=t),t.PrevInAEL=r,t.NextInAEL=i,i.PrevInAEL=t,i.NextInAEL=e}else{var e=t.NextInAEL,r=t.PrevInAEL;t.NextInAEL=i.NextInAEL,null!==t.NextInAEL&&(t.NextInAEL.PrevInAEL=t),t.PrevInAEL=i.PrevInAEL,null!==t.PrevInAEL&&(t.PrevInAEL.NextInAEL=t),i.NextInAEL=e,null!==i.NextInAEL&&(i.NextInAEL.PrevInAEL=i),i.PrevInAEL=r,null!==i.PrevInAEL&&(i.PrevInAEL.NextInAEL=i)}null===t.PrevInAEL?this.m_ActiveEdges=t:null===i.PrevInAEL&&(this.m_ActiveEdges=i)}},ClipperLib.Clipper.prototype.SwapPositionsInSEL=function(t,i){if(!(null===t.NextInSEL&&null===t.PrevInSEL||null===i.NextInSEL&&null===i.PrevInSEL)){if(t.NextInSEL==i)null!==(e=i.NextInSEL)&&(e.PrevInSEL=t),null!==(r=t.PrevInSEL)&&(r.NextInSEL=i),i.PrevInSEL=r,i.NextInSEL=t,t.PrevInSEL=i,t.NextInSEL=e;else if(i.NextInSEL==t){null!==(e=t.NextInSEL)&&(e.PrevInSEL=i),null!==(r=i.PrevInSEL)&&(r.NextInSEL=t),t.PrevInSEL=r,t.NextInSEL=i,i.PrevInSEL=t,i.NextInSEL=e}else{var e=t.NextInSEL,r=t.PrevInSEL;t.NextInSEL=i.NextInSEL,null!==t.NextInSEL&&(t.NextInSEL.PrevInSEL=t),t.PrevInSEL=i.PrevInSEL,null!==t.PrevInSEL&&(t.PrevInSEL.NextInSEL=t),i.NextInSEL=e,null!==i.NextInSEL&&(i.NextInSEL.PrevInSEL=i),i.PrevInSEL=r,null!==i.PrevInSEL&&(i.PrevInSEL.NextInSEL=i)}null===t.PrevInSEL?this.m_SortedEdges=t:null===i.PrevInSEL&&(this.m_SortedEdges=i)}},ClipperLib.Clipper.prototype.AddLocalMaxPoly=function(t,i,e){this.AddOutPt(t,e),0==i.WindDelta&&this.AddOutPt(i,e),t.OutIdx==i.OutIdx?(t.OutIdx=-1,i.OutIdx=-1):t.OutIdx<i.OutIdx?this.AppendPolygon(t,i):this.AppendPolygon(i,t)},ClipperLib.Clipper.prototype.AddLocalMinPoly=function(t,i,e){var r,n,p;if(ClipperLib.ClipperBase.IsHorizontal(i)||t.Dx>i.Dx?(r=this.AddOutPt(t,e),i.OutIdx=t.OutIdx,t.Side=ClipperLib.EdgeSide.esLeft,i.Side=ClipperLib.EdgeSide.esRight,p=(n=t).PrevInAEL==i?i.PrevInAEL:n.PrevInAEL):(r=this.AddOutPt(i,e),t.OutIdx=i.OutIdx,t.Side=ClipperLib.EdgeSide.esRight,i.Side=ClipperLib.EdgeSide.esLeft,p=(n=i).PrevInAEL==t?t.PrevInAEL:n.PrevInAEL),null!==p&&p.OutIdx>=0&&ClipperLib.Clipper.TopX(p,e.Y)==ClipperLib.Clipper.TopX(n,e.Y)&&ClipperLib.ClipperBase.SlopesEqual(n,p,this.m_UseFullRange)&&0!==n.WindDelta&&0!==p.WindDelta){var o=this.AddOutPt(p,e);this.AddJoin(r,o,n.Top)}return r},ClipperLib.Clipper.prototype.CreateOutRec=function(){var t=new ClipperLib.OutRec;return t.Idx=-1,t.IsHole=!1,t.IsOpen=!1,t.FirstLeft=null,t.Pts=null,t.BottomPt=null,t.PolyNode=null,this.m_PolyOuts.push(t),t.Idx=this.m_PolyOuts.length-1,t},ClipperLib.Clipper.prototype.AddOutPt=function(t,i){var e=t.Side==ClipperLib.EdgeSide.esLeft;if(t.OutIdx<0){(n=this.CreateOutRec()).IsOpen=0===t.WindDelta;var r=new ClipperLib.OutPt;return n.Pts=r,r.Idx=n.Idx,r.Pt.X=i.X,r.Pt.Y=i.Y,r.Next=r,r.Prev=r,n.IsOpen||this.SetHoleState(t,n),use_xyz&&(ClipperLib.IntPoint.op_Equality(i,t.Bot)?(r.Pt.X=t.Bot.X,r.Pt.Y=t.Bot.Y,r.Pt.Z=t.Bot.Z):ClipperLib.IntPoint.op_Equality(i,t.Top)?(r.Pt.X=t.Top.X,r.Pt.Y=t.Top.Y,r.Pt.Z=t.Top.Z):this.SetZ(r.Pt,t)),t.OutIdx=n.Idx,r}var n,p=(n=this.m_PolyOuts[t.OutIdx]).Pts;return e&&ClipperLib.IntPoint.op_Equality(i,p.Pt)?p:!e&&ClipperLib.IntPoint.op_Equality(i,p.Prev.Pt)?p.Prev:((r=new ClipperLib.OutPt).Idx=n.Idx,r.Pt.X=i.X,r.Pt.Y=i.Y,r.Next=p,r.Prev=p.Prev,r.Prev.Next=r,p.Prev=r,e&&(n.Pts=r),use_xyz&&(ClipperLib.IntPoint.op_Equality(i,t.Bot)?(r.Pt.X=t.Bot.X,r.Pt.Y=t.Bot.Y,r.Pt.Z=t.Bot.Z):ClipperLib.IntPoint.op_Equality(i,t.Top)?(r.Pt.X=t.Top.X,r.Pt.Y=t.Top.Y,r.Pt.Z=t.Top.Z):this.SetZ(r.Pt,t)),r)},ClipperLib.Clipper.prototype.SwapPoints=function(t,i){var e=new ClipperLib.IntPoint(t.Value);t.Value.X=i.Value.X,t.Value.Y=i.Value.Y,i.Value.X=e.X,i.Value.Y=e.Y},ClipperLib.Clipper.prototype.HorzSegmentsOverlap=function(t,i,e,r){return t.X>e.X==t.X<r.X||(i.X>e.X==i.X<r.X||(e.X>t.X==e.X<i.X||(r.X>t.X==r.X<i.X||(t.X==e.X&&i.X==r.X||t.X==r.X&&i.X==e.X))))},ClipperLib.Clipper.prototype.InsertPolyPtBetween=function(t,i,e){var r=new ClipperLib.OutPt;return r.Pt.X=e.X,r.Pt.Y=e.Y,i==t.Next?(t.Next=r,i.Prev=r,r.Next=i,r.Prev=t):(i.Next=r,t.Prev=r,r.Next=t,r.Prev=i),r},ClipperLib.Clipper.prototype.SetHoleState=function(t,i){for(var e=!1,r=t.PrevInAEL;null!==r;)r.OutIdx>=0&&0!=r.WindDelta&&(e=!e,null===i.FirstLeft&&(i.FirstLeft=this.m_PolyOuts[r.OutIdx])),r=r.PrevInAEL;e&&(i.IsHole=!0)},ClipperLib.Clipper.prototype.GetDx=function(t,i){return t.Y==i.Y?ClipperLib.ClipperBase.horizontal:(i.X-t.X)/(i.Y-t.Y)},ClipperLib.Clipper.prototype.FirstIsBottomPt=function(t,i){for(var e=t.Prev;ClipperLib.IntPoint.op_Equality(e.Pt,t.Pt)&&e!=t;)e=e.Prev;var r=Math.abs(this.GetDx(t.Pt,e.Pt));for(e=t.Next;ClipperLib.IntPoint.op_Equality(e.Pt,t.Pt)&&e!=t;)e=e.Next;var n=Math.abs(this.GetDx(t.Pt,e.Pt));for(e=i.Prev;ClipperLib.IntPoint.op_Equality(e.Pt,i.Pt)&&e!=i;)e=e.Prev;var p=Math.abs(this.GetDx(i.Pt,e.Pt));for(e=i.Next;ClipperLib.IntPoint.op_Equality(e.Pt,i.Pt)&&e!=i;)e=e.Next;var o=Math.abs(this.GetDx(i.Pt,e.Pt));return r>=p&&r>=o||n>=p&&n>=o},ClipperLib.Clipper.prototype.GetBottomPt=function(t){for(var i=null,e=t.Next;e!=t;)e.Pt.Y>t.Pt.Y?(t=e,i=null):e.Pt.Y==t.Pt.Y&&e.Pt.X<=t.Pt.X&&(e.Pt.X<t.Pt.X?(i=null,t=e):e.Next!=t&&e.Prev!=t&&(i=e)),e=e.Next;if(null!==i)for(;i!=e;)for(this.FirstIsBottomPt(e,i)||(t=i),i=i.Next;ClipperLib.IntPoint.op_Inequality(i.Pt,t.Pt);)i=i.Next;return t},ClipperLib.Clipper.prototype.GetLowermostRec=function(t,i){null===t.BottomPt&&(t.BottomPt=this.GetBottomPt(t.Pts)),null===i.BottomPt&&(i.BottomPt=this.GetBottomPt(i.Pts));var e=t.BottomPt,r=i.BottomPt;return e.Pt.Y>r.Pt.Y?t:e.Pt.Y<r.Pt.Y?i:e.Pt.X<r.Pt.X?t:e.Pt.X>r.Pt.X||e.Next==e?i:r.Next==r||this.FirstIsBottomPt(e,r)?t:i},ClipperLib.Clipper.prototype.Param1RightOfParam2=function(t,i){do{if((t=t.FirstLeft)==i)return!0}while(null!==t);return!1},ClipperLib.Clipper.prototype.GetOutRec=function(t){for(var i=this.m_PolyOuts[t];i!=this.m_PolyOuts[i.Idx];)i=this.m_PolyOuts[i.Idx];return i},ClipperLib.Clipper.prototype.AppendPolygon=function(t,i){var e,r=this.m_PolyOuts[t.OutIdx],n=this.m_PolyOuts[i.OutIdx];e=this.Param1RightOfParam2(r,n)?n:this.Param1RightOfParam2(n,r)?r:this.GetLowermostRec(r,n);var p,o=r.Pts,l=o.Prev,s=n.Pts,h=s.Prev;t.Side==ClipperLib.EdgeSide.esLeft?(i.Side==ClipperLib.EdgeSide.esLeft?(this.ReversePolyPtLinks(s),s.Next=o,o.Prev=s,l.Next=h,h.Prev=l,r.Pts=h):(h.Next=o,o.Prev=h,s.Prev=l,l.Next=s,r.Pts=s),p=ClipperLib.EdgeSide.esLeft):(i.Side==ClipperLib.EdgeSide.esRight?(this.ReversePolyPtLinks(s),l.Next=h,h.Prev=l,s.Next=o,o.Prev=s):(l.Next=s,s.Prev=l,o.Prev=h,h.Next=o),p=ClipperLib.EdgeSide.esRight),r.BottomPt=null,e==n&&(n.FirstLeft!=r&&(r.FirstLeft=n.FirstLeft),r.IsHole=n.IsHole),n.Pts=null,n.BottomPt=null,n.FirstLeft=r;var u=t.OutIdx,a=i.OutIdx;t.OutIdx=-1,i.OutIdx=-1;for(var C=this.m_ActiveEdges;null!==C;){if(C.OutIdx==a){C.OutIdx=u,C.Side=p;break}C=C.NextInAEL}n.Idx=r.Idx},ClipperLib.Clipper.prototype.ReversePolyPtLinks=function(t){if(null!==t){var i,e;i=t;do{e=i.Next,i.Next=i.Prev,i.Prev=e,i=e}while(i!=t)}},ClipperLib.Clipper.SwapSides=function(t,i){var e=t.Side;t.Side=i.Side,i.Side=e},ClipperLib.Clipper.SwapPolyIndexes=function(t,i){var e=t.OutIdx;t.OutIdx=i.OutIdx,i.OutIdx=e},ClipperLib.Clipper.prototype.IntersectEdges=function(t,i,e,r){var n,p,o,l,s,h,u=!r&&null===t.NextInLML&&t.Top.X==e.X&&t.Top.Y==e.Y,a=!r&&null===i.NextInLML&&i.Top.X==e.X&&i.Top.Y==e.Y,C=t.OutIdx>=0,f=i.OutIdx>=0;if(use_lines&&(0===t.WindDelta||0===i.WindDelta))return 0===t.WindDelta&&0===i.WindDelta?(u||a)&&C&&f&&this.AddLocalMaxPoly(t,i,e):t.PolyTyp==i.PolyTyp&&t.WindDelta!=i.WindDelta&&this.m_ClipType==ClipperLib.ClipType.ctUnion?0===t.WindDelta?f&&(this.AddOutPt(t,e),C&&(t.OutIdx=-1)):C&&(this.AddOutPt(i,e),f&&(i.OutIdx=-1)):t.PolyTyp!=i.PolyTyp&&(0!==t.WindDelta||1!=Math.abs(i.WindCnt)||this.m_ClipType==ClipperLib.ClipType.ctUnion&&0!==i.WindCnt2?0!==i.WindDelta||1!=Math.abs(t.WindCnt)||this.m_ClipType==ClipperLib.ClipType.ctUnion&&0!==t.WindCnt2||(this.AddOutPt(i,e),f&&(i.OutIdx=-1)):(this.AddOutPt(t,e),C&&(t.OutIdx=-1))),u&&(t.OutIdx<0?this.DeleteFromAEL(t):ClipperLib.Error("Error intersecting polylines")),void(a&&(i.OutIdx<0?this.DeleteFromAEL(i):ClipperLib.Error("Error intersecting polylines")));if(t.PolyTyp==i.PolyTyp)if(this.IsEvenOddFillType(t)){var d=t.WindCnt;t.WindCnt=i.WindCnt,i.WindCnt=d}else t.WindCnt+i.WindDelta===0?t.WindCnt=-t.WindCnt:t.WindCnt+=i.WindDelta,i.WindCnt-t.WindDelta==0?i.WindCnt=-i.WindCnt:i.WindCnt-=t.WindDelta;else this.IsEvenOddFillType(i)?t.WindCnt2=0===t.WindCnt2?1:0:t.WindCnt2+=i.WindDelta,this.IsEvenOddFillType(t)?i.WindCnt2=0===i.WindCnt2?1:0:i.WindCnt2-=t.WindDelta;switch(t.PolyTyp==ClipperLib.PolyType.ptSubject?(n=this.m_SubjFillType,o=this.m_ClipFillType):(n=this.m_ClipFillType,o=this.m_SubjFillType),i.PolyTyp==ClipperLib.PolyType.ptSubject?(p=this.m_SubjFillType,l=this.m_ClipFillType):(p=this.m_ClipFillType,l=this.m_SubjFillType),n){case ClipperLib.PolyFillType.pftPositive:s=t.WindCnt;break;case ClipperLib.PolyFillType.pftNegative:s=-t.WindCnt;break;default:s=Math.abs(t.WindCnt)}switch(p){case ClipperLib.PolyFillType.pftPositive:h=i.WindCnt;break;case ClipperLib.PolyFillType.pftNegative:h=-i.WindCnt;break;default:h=Math.abs(i.WindCnt)}if(C&&f)u||a||0!==s&&1!=s||0!==h&&1!=h||t.PolyTyp!=i.PolyTyp&&this.m_ClipType!=ClipperLib.ClipType.ctXor?this.AddLocalMaxPoly(t,i,e):(this.AddOutPt(t,e),this.AddOutPt(i,e),ClipperLib.Clipper.SwapSides(t,i),ClipperLib.Clipper.SwapPolyIndexes(t,i));else if(C)0!==h&&1!=h||(this.AddOutPt(t,e),ClipperLib.Clipper.SwapSides(t,i),ClipperLib.Clipper.SwapPolyIndexes(t,i));else if(f)0!==s&&1!=s||(this.AddOutPt(i,e),ClipperLib.Clipper.SwapSides(t,i),ClipperLib.Clipper.SwapPolyIndexes(t,i));else if(!(0!==s&&1!=s||0!==h&&1!=h||u||a)){var L,P;switch(o){case ClipperLib.PolyFillType.pftPositive:L=t.WindCnt2;break;case ClipperLib.PolyFillType.pftNegative:L=-t.WindCnt2;break;default:L=Math.abs(t.WindCnt2)}switch(l){case ClipperLib.PolyFillType.pftPositive:P=i.WindCnt2;break;case ClipperLib.PolyFillType.pftNegative:P=-i.WindCnt2;break;default:P=Math.abs(i.WindCnt2)}if(t.PolyTyp!=i.PolyTyp)this.AddLocalMinPoly(t,i,e);else if(1==s&&1==h)switch(this.m_ClipType){case ClipperLib.ClipType.ctIntersection:L>0&&P>0&&this.AddLocalMinPoly(t,i,e);break;case ClipperLib.ClipType.ctUnion:L<=0&&P<=0&&this.AddLocalMinPoly(t,i,e);break;case ClipperLib.ClipType.ctDifference:(t.PolyTyp==ClipperLib.PolyType.ptClip&&L>0&&P>0||t.PolyTyp==ClipperLib.PolyType.ptSubject&&L<=0&&P<=0)&&this.AddLocalMinPoly(t,i,e);break;case ClipperLib.ClipType.ctXor:this.AddLocalMinPoly(t,i,e)}else ClipperLib.Clipper.SwapSides(t,i)}u!=a&&(u&&t.OutIdx>=0||a&&i.OutIdx>=0)&&(ClipperLib.Clipper.SwapSides(t,i),ClipperLib.Clipper.SwapPolyIndexes(t,i)),u&&this.DeleteFromAEL(t),a&&this.DeleteFromAEL(i)},ClipperLib.Clipper.prototype.DeleteFromAEL=function(t){var i=t.PrevInAEL,e=t.NextInAEL;null===i&&null===e&&t!=this.m_ActiveEdges||(null!==i?i.NextInAEL=e:this.m_ActiveEdges=e,null!==e&&(e.PrevInAEL=i),t.NextInAEL=null,t.PrevInAEL=null)},ClipperLib.Clipper.prototype.DeleteFromSEL=function(t){var i=t.PrevInSEL,e=t.NextInSEL;null===i&&null===e&&t!=this.m_SortedEdges||(null!==i?i.NextInSEL=e:this.m_SortedEdges=e,null!==e&&(e.PrevInSEL=i),t.NextInSEL=null,t.PrevInSEL=null)},ClipperLib.Clipper.prototype.UpdateEdgeIntoAEL=function(t){null===t.NextInLML&&ClipperLib.Error("UpdateEdgeIntoAEL: invalid call");var i=t.PrevInAEL,e=t.NextInAEL;return t.NextInLML.OutIdx=t.OutIdx,null!==i?i.NextInAEL=t.NextInLML:this.m_ActiveEdges=t.NextInLML,null!==e&&(e.PrevInAEL=t.NextInLML),t.NextInLML.Side=t.Side,t.NextInLML.WindDelta=t.WindDelta,t.NextInLML.WindCnt=t.WindCnt,t.NextInLML.WindCnt2=t.WindCnt2,(t=t.NextInLML).Curr.X=t.Bot.X,t.Curr.Y=t.Bot.Y,t.PrevInAEL=i,t.NextInAEL=e,ClipperLib.ClipperBase.IsHorizontal(t)||this.InsertScanbeam(t.Top.Y),t},ClipperLib.Clipper.prototype.ProcessHorizontals=function(t){for(var i=this.m_SortedEdges;null!==i;)this.DeleteFromSEL(i),this.ProcessHorizontal(i,t),i=this.m_SortedEdges},ClipperLib.Clipper.prototype.GetHorzDirection=function(t,i){t.Bot.X<t.Top.X?(i.Left=t.Bot.X,i.Right=t.Top.X,i.Dir=ClipperLib.Direction.dLeftToRight):(i.Left=t.Top.X,i.Right=t.Bot.X,i.Dir=ClipperLib.Direction.dRightToLeft)},ClipperLib.Clipper.prototype.PrepareHorzJoins=function(t,i){var e=this.m_PolyOuts[t.OutIdx].Pts;t.Side!=ClipperLib.EdgeSide.esLeft&&(e=e.Prev),i&&(ClipperLib.IntPoint.op_Equality(e.Pt,t.Top)?this.AddGhostJoin(e,t.Bot):this.AddGhostJoin(e,t.Top))},ClipperLib.Clipper.prototype.ProcessHorizontal=function(t,i){var e={Dir:null,Left:null,Right:null};this.GetHorzDirection(t,e);for(var r=e.Dir,n=e.Left,p=e.Right,o=t,l=null;null!==o.NextInLML&&ClipperLib.ClipperBase.IsHorizontal(o.NextInLML);)o=o.NextInLML;for(null===o.NextInLML&&(l=this.GetMaximaPair(o));;){for(var s=t==o,h=this.GetNextInAEL(t,r);null!==h&&!(h.Curr.X==t.Top.X&&null!==t.NextInLML&&h.Dx<t.NextInLML.Dx);){var u=this.GetNextInAEL(h,r);if(r==ClipperLib.Direction.dLeftToRight&&h.Curr.X<=p||r==ClipperLib.Direction.dRightToLeft&&h.Curr.X>=n){if(t.OutIdx>=0&&0!=t.WindDelta&&this.PrepareHorzJoins(t,i),h==l&&s)return r==ClipperLib.Direction.dLeftToRight?this.IntersectEdges(t,h,h.Top,!1):this.IntersectEdges(h,t,h.Top,!1),void(l.OutIdx>=0&&ClipperLib.Error("ProcessHorizontal error"));if(r==ClipperLib.Direction.dLeftToRight){var a=new ClipperLib.IntPoint(h.Curr.X,t.Curr.Y);this.IntersectEdges(t,h,a,!0)}else{a=new ClipperLib.IntPoint(h.Curr.X,t.Curr.Y);this.IntersectEdges(h,t,a,!0)}this.SwapPositionsInAEL(t,h)}else if(r==ClipperLib.Direction.dLeftToRight&&h.Curr.X>=p||r==ClipperLib.Direction.dRightToLeft&&h.Curr.X<=n)break;h=u}if(t.OutIdx>=0&&0!==t.WindDelta&&this.PrepareHorzJoins(t,i),null===t.NextInLML||!ClipperLib.ClipperBase.IsHorizontal(t.NextInLML))break;(t=this.UpdateEdgeIntoAEL(t)).OutIdx>=0&&this.AddOutPt(t,t.Bot);e={Dir:r,Left:n,Right:p};this.GetHorzDirection(t,e),r=e.Dir,n=e.Left,p=e.Right}if(null!==t.NextInLML)if(t.OutIdx>=0){var C=this.AddOutPt(t,t.Top);if(0===(t=this.UpdateEdgeIntoAEL(t)).WindDelta)return;var f=t.PrevInAEL;u=t.NextInAEL;if(null!==f&&f.Curr.X==t.Bot.X&&f.Curr.Y==t.Bot.Y&&0!==f.WindDelta&&f.OutIdx>=0&&f.Curr.Y>f.Top.Y&&ClipperLib.ClipperBase.SlopesEqual(t,f,this.m_UseFullRange)){var d=this.AddOutPt(f,t.Bot);this.AddJoin(C,d,t.Top)}else if(null!==u&&u.Curr.X==t.Bot.X&&u.Curr.Y==t.Bot.Y&&0!==u.WindDelta&&u.OutIdx>=0&&u.Curr.Y>u.Top.Y&&ClipperLib.ClipperBase.SlopesEqual(t,u,this.m_UseFullRange)){d=this.AddOutPt(u,t.Bot);this.AddJoin(C,d,t.Top)}}else t=this.UpdateEdgeIntoAEL(t);else null!==l?l.OutIdx>=0?(r==ClipperLib.Direction.dLeftToRight?this.IntersectEdges(t,l,t.Top,!1):this.IntersectEdges(l,t,t.Top,!1),l.OutIdx>=0&&ClipperLib.Error("ProcessHorizontal error")):(this.DeleteFromAEL(t),this.DeleteFromAEL(l)):(t.OutIdx>=0&&this.AddOutPt(t,t.Top),this.DeleteFromAEL(t))},ClipperLib.Clipper.prototype.GetNextInAEL=function(t,i){return i==ClipperLib.Direction.dLeftToRight?t.NextInAEL:t.PrevInAEL},ClipperLib.Clipper.prototype.IsMinima=function(t){return null!==t&&t.Prev.NextInLML!=t&&t.Next.NextInLML!=t},ClipperLib.Clipper.prototype.IsMaxima=function(t,i){return null!==t&&t.Top.Y==i&&null===t.NextInLML},ClipperLib.Clipper.prototype.IsIntermediate=function(t,i){return t.Top.Y==i&&null!==t.NextInLML},ClipperLib.Clipper.prototype.GetMaximaPair=function(t){var i=null;return ClipperLib.IntPoint.op_Equality(t.Next.Top,t.Top)&&null===t.Next.NextInLML?i=t.Next:ClipperLib.IntPoint.op_Equality(t.Prev.Top,t.Top)&&null===t.Prev.NextInLML&&(i=t.Prev),null===i||-2!=i.OutIdx&&(i.NextInAEL!=i.PrevInAEL||ClipperLib.ClipperBase.IsHorizontal(i))?i:null},ClipperLib.Clipper.prototype.ProcessIntersections=function(t,i){if(null==this.m_ActiveEdges)return!0;try{if(this.BuildIntersectList(t,i),0==this.m_IntersectList.length)return!0;if(1!=this.m_IntersectList.length&&!this.FixupIntersectionOrder())return!1;this.ProcessIntersectList()}catch(t){this.m_SortedEdges=null,this.m_IntersectList.length=0,ClipperLib.Error("ProcessIntersections error")}return this.m_SortedEdges=null,!0},ClipperLib.Clipper.prototype.BuildIntersectList=function(t,i){if(null!==this.m_ActiveEdges){var e=this.m_ActiveEdges;for(this.m_SortedEdges=e;null!==e;)e.PrevInSEL=e.PrevInAEL,e.NextInSEL=e.NextInAEL,e.Curr.X=ClipperLib.Clipper.TopX(e,i),e=e.NextInAEL;for(var r=!0;r&&null!==this.m_SortedEdges;){for(r=!1,e=this.m_SortedEdges;null!==e.NextInSEL;){var n=e.NextInSEL,p=new ClipperLib.IntPoint;if(e.Curr.X>n.Curr.X){!this.IntersectPoint(e,n,p)&&e.Curr.X>n.Curr.X+1&&ClipperLib.Error("Intersection error"),p.Y>t&&(p.Y=t,Math.abs(e.Dx)>Math.abs(n.Dx)?p.X=ClipperLib.Clipper.TopX(n,t):p.X=ClipperLib.Clipper.TopX(e,t));var o=new ClipperLib.IntersectNode;o.Edge1=e,o.Edge2=n,o.Pt.X=p.X,o.Pt.Y=p.Y,this.m_IntersectList.push(o),this.SwapPositionsInSEL(e,n),r=!0}else e=n}if(null===e.PrevInSEL)break;e.PrevInSEL.NextInSEL=null}this.m_SortedEdges=null}},ClipperLib.Clipper.prototype.EdgesAdjacent=function(t){return t.Edge1.NextInSEL==t.Edge2||t.Edge1.PrevInSEL==t.Edge2},ClipperLib.Clipper.IntersectNodeSort=function(t,i){return i.Pt.Y-t.Pt.Y},ClipperLib.Clipper.prototype.FixupIntersectionOrder=function(){this.m_IntersectList.sort(this.m_IntersectNodeComparer),this.CopyAELToSEL();for(var t=this.m_IntersectList.length,i=0;i<t;i++){if(!this.EdgesAdjacent(this.m_IntersectList[i])){for(var e=i+1;e<t&&!this.EdgesAdjacent(this.m_IntersectList[e]);)e++;if(e==t)return!1;var r=this.m_IntersectList[i];this.m_IntersectList[i]=this.m_IntersectList[e],this.m_IntersectList[e]=r}this.SwapPositionsInSEL(this.m_IntersectList[i].Edge1,this.m_IntersectList[i].Edge2)}return!0},ClipperLib.Clipper.prototype.ProcessIntersectList=function(){for(var t=0,i=this.m_IntersectList.length;t<i;t++){var e=this.m_IntersectList[t];this.IntersectEdges(e.Edge1,e.Edge2,e.Pt,!0),this.SwapPositionsInAEL(e.Edge1,e.Edge2)}this.m_IntersectList.length=0};var R1=function(t){return t<0?Math.ceil(t-.5):Math.round(t)},R2=function(t){return t<0?Math.ceil(t-.5):Math.floor(t+.5)},R3=function(t){return t<0?-Math.round(Math.abs(t)):Math.round(t)},R4=function(t){return t<0?(t-=.5)<-2147483648?Math.ceil(t):0|t:(t+=.5)>2147483647?Math.floor(t):0|t};browser.msie?ClipperLib.Clipper.Round=R1:browser.chromium?ClipperLib.Clipper.Round=R3:browser.safari?ClipperLib.Clipper.Round=R4:ClipperLib.Clipper.Round=R2,ClipperLib.Clipper.TopX=function(t,i){return i==t.Top.Y?t.Top.X:t.Bot.X+ClipperLib.Clipper.Round(t.Dx*(i-t.Bot.Y))},ClipperLib.Clipper.prototype.IntersectPoint=function(t,i,e){var r,n;if(e.X=0,e.Y=0,ClipperLib.ClipperBase.SlopesEqual(t,i,this.m_UseFullRange)||t.Dx==i.Dx)return i.Bot.Y>t.Bot.Y?(e.X=i.Bot.X,e.Y=i.Bot.Y):(e.X=t.Bot.X,e.Y=t.Bot.Y),!1;if(0===t.Delta.X)e.X=t.Bot.X,ClipperLib.ClipperBase.IsHorizontal(i)?e.Y=i.Bot.Y:(n=i.Bot.Y-i.Bot.X/i.Dx,e.Y=ClipperLib.Clipper.Round(e.X/i.Dx+n));else if(0===i.Delta.X)e.X=i.Bot.X,ClipperLib.ClipperBase.IsHorizontal(t)?e.Y=t.Bot.Y:(r=t.Bot.Y-t.Bot.X/t.Dx,e.Y=ClipperLib.Clipper.Round(e.X/t.Dx+r));else{r=t.Bot.X-t.Bot.Y*t.Dx;var p=((n=i.Bot.X-i.Bot.Y*i.Dx)-r)/(t.Dx-i.Dx);e.Y=ClipperLib.Clipper.Round(p),Math.abs(t.Dx)<Math.abs(i.Dx)?e.X=ClipperLib.Clipper.Round(t.Dx*p+r):e.X=ClipperLib.Clipper.Round(i.Dx*p+n)}if(e.Y<t.Top.Y||e.Y<i.Top.Y){if(t.Top.Y>i.Top.Y)return e.Y=t.Top.Y,e.X=ClipperLib.Clipper.TopX(i,t.Top.Y),e.X<t.Top.X;e.Y=i.Top.Y,Math.abs(t.Dx)<Math.abs(i.Dx)?e.X=ClipperLib.Clipper.TopX(t,e.Y):e.X=ClipperLib.Clipper.TopX(i,e.Y)}return!0},ClipperLib.Clipper.prototype.ProcessEdgesAtTopOfScanbeam=function(t){for(var i=this.m_ActiveEdges;null!==i;){var e=this.IsMaxima(i,t);if(e){var r=this.GetMaximaPair(i);e=null===r||!ClipperLib.ClipperBase.IsHorizontal(r)}if(e){var n=i.PrevInAEL;this.DoMaxima(i),i=null===n?this.m_ActiveEdges:n.NextInAEL}else{if(this.IsIntermediate(i,t)&&ClipperLib.ClipperBase.IsHorizontal(i.NextInLML)?((i=this.UpdateEdgeIntoAEL(i)).OutIdx>=0&&this.AddOutPt(i,i.Bot),this.AddEdgeToSEL(i)):(i.Curr.X=ClipperLib.Clipper.TopX(i,t),i.Curr.Y=t),this.StrictlySimple){n=i.PrevInAEL;if(i.OutIdx>=0&&0!==i.WindDelta&&null!==n&&n.OutIdx>=0&&n.Curr.X==i.Curr.X&&0!==n.WindDelta){var p=this.AddOutPt(n,i.Curr),o=this.AddOutPt(i,i.Curr);this.AddJoin(p,o,i.Curr)}}i=i.NextInAEL}}for(this.ProcessHorizontals(!0),i=this.m_ActiveEdges;null!==i;){if(this.IsIntermediate(i,t)){p=null;i.OutIdx>=0&&(p=this.AddOutPt(i,i.Top));n=(i=this.UpdateEdgeIntoAEL(i)).PrevInAEL;var l=i.NextInAEL;if(null!==n&&n.Curr.X==i.Bot.X&&n.Curr.Y==i.Bot.Y&&null!==p&&n.OutIdx>=0&&n.Curr.Y>n.Top.Y&&ClipperLib.ClipperBase.SlopesEqual(i,n,this.m_UseFullRange)&&0!==i.WindDelta&&0!==n.WindDelta){o=this.AddOutPt(n,i.Bot);this.AddJoin(p,o,i.Top)}else if(null!==l&&l.Curr.X==i.Bot.X&&l.Curr.Y==i.Bot.Y&&null!==p&&l.OutIdx>=0&&l.Curr.Y>l.Top.Y&&ClipperLib.ClipperBase.SlopesEqual(i,l,this.m_UseFullRange)&&0!==i.WindDelta&&0!==l.WindDelta){o=this.AddOutPt(l,i.Bot);this.AddJoin(p,o,i.Top)}}i=i.NextInAEL}},ClipperLib.Clipper.prototype.DoMaxima=function(t){var i=this.GetMaximaPair(t);if(null===i)return t.OutIdx>=0&&this.AddOutPt(t,t.Top),void this.DeleteFromAEL(t);for(var e=t.NextInAEL;null!==e&&e!=i;)this.IntersectEdges(t,e,t.Top,!0),this.SwapPositionsInAEL(t,e),e=t.NextInAEL;-1==t.OutIdx&&-1==i.OutIdx?(this.DeleteFromAEL(t),this.DeleteFromAEL(i)):t.OutIdx>=0&&i.OutIdx>=0?this.IntersectEdges(t,i,t.Top,!1):0===t.WindDelta?(t.OutIdx>=0&&(this.AddOutPt(t,t.Top),t.OutIdx=-1),this.DeleteFromAEL(t),i.OutIdx>=0&&(this.AddOutPt(i,t.Top),i.OutIdx=-1),this.DeleteFromAEL(i)):ClipperLib.Error("DoMaxima error")},ClipperLib.Clipper.ReversePaths=function(t){for(var i=0,e=t.length;i<e;i++)t[i].reverse()},ClipperLib.Clipper.Orientation=function(t){return ClipperLib.Clipper.Area(t)>=0},ClipperLib.Clipper.prototype.PointCount=function(t){if(null===t)return 0;var i=0,e=t;do{i++,e=e.Next}while(e!=t);return i},ClipperLib.Clipper.prototype.BuildResult=function(t){ClipperLib.Clear(t);for(var i=0,e=this.m_PolyOuts.length;i<e;i++){var r=this.m_PolyOuts[i];if(null!==r.Pts){var n=r.Pts.Prev,p=this.PointCount(n);if(!(p<2)){for(var o=new Array(p),l=0;l<p;l++)o[l]=n.Pt,n=n.Prev;t.push(o)}}}},ClipperLib.Clipper.prototype.BuildResult2=function(t){t.Clear();for(var i=0,e=this.m_PolyOuts.length;i<e;i++){var r=this.m_PolyOuts[i],n=this.PointCount(r.Pts);if(!(r.IsOpen&&n<2||!r.IsOpen&&n<3)){this.FixHoleLinkage(r);var p=new ClipperLib.PolyNode;t.m_AllPolys.push(p),r.PolyNode=p,p.m_polygon.length=n;for(var o=r.Pts.Prev,l=0;l<n;l++)p.m_polygon[l]=o.Pt,o=o.Prev}}for(i=0,e=this.m_PolyOuts.length;i<e;i++){null!==(r=this.m_PolyOuts[i]).PolyNode&&(r.IsOpen?(r.PolyNode.IsOpen=!0,t.AddChild(r.PolyNode)):null!==r.FirstLeft&&null!=r.FirstLeft.PolyNode?r.FirstLeft.PolyNode.AddChild(r.PolyNode):t.AddChild(r.PolyNode))}},ClipperLib.Clipper.prototype.FixupOutPolygon=function(t){var i=null;t.BottomPt=null;for(var e=t.Pts;;){if(e.Prev==e||e.Prev==e.Next)return this.DisposeOutPts(e),void(t.Pts=null);if(ClipperLib.IntPoint.op_Equality(e.Pt,e.Next.Pt)||ClipperLib.IntPoint.op_Equality(e.Pt,e.Prev.Pt)||ClipperLib.ClipperBase.SlopesEqual(e.Prev.Pt,e.Pt,e.Next.Pt,this.m_UseFullRange)&&(!this.PreserveCollinear||!this.Pt2IsBetweenPt1AndPt3(e.Prev.Pt,e.Pt,e.Next.Pt))){i=null;e.Prev.Next=e.Next,e.Next.Prev=e.Prev,e=e.Prev,null}else{if(e==i)break;null===i&&(i=e),e=e.Next}}t.Pts=e},ClipperLib.Clipper.prototype.DupOutPt=function(t,i){var e=new ClipperLib.OutPt;return e.Pt.X=t.Pt.X,e.Pt.Y=t.Pt.Y,e.Idx=t.Idx,i?(e.Next=t.Next,e.Prev=t,t.Next.Prev=e,t.Next=e):(e.Prev=t.Prev,e.Next=t,t.Prev.Next=e,t.Prev=e),e},ClipperLib.Clipper.prototype.GetOverlap=function(t,i,e,r,n){return t<i?e<r?(n.Left=Math.max(t,e),n.Right=Math.min(i,r)):(n.Left=Math.max(t,r),n.Right=Math.min(i,e)):e<r?(n.Left=Math.max(i,e),n.Right=Math.min(t,r)):(n.Left=Math.max(i,r),n.Right=Math.min(t,e)),n.Left<n.Right},ClipperLib.Clipper.prototype.JoinHorz=function(t,i,e,r,n,p){var o=t.Pt.X>i.Pt.X?ClipperLib.Direction.dRightToLeft:ClipperLib.Direction.dLeftToRight,l=e.Pt.X>r.Pt.X?ClipperLib.Direction.dRightToLeft:ClipperLib.Direction.dLeftToRight;if(o==l)return!1;if(o==ClipperLib.Direction.dLeftToRight){for(;t.Next.Pt.X<=n.X&&t.Next.Pt.X>=t.Pt.X&&t.Next.Pt.Y==n.Y;)t=t.Next;p&&t.Pt.X!=n.X&&(t=t.Next),i=this.DupOutPt(t,!p),ClipperLib.IntPoint.op_Inequality(i.Pt,n)&&((t=i).Pt.X=n.X,t.Pt.Y=n.Y,i=this.DupOutPt(t,!p))}else{for(;t.Next.Pt.X>=n.X&&t.Next.Pt.X<=t.Pt.X&&t.Next.Pt.Y==n.Y;)t=t.Next;p||t.Pt.X==n.X||(t=t.Next),i=this.DupOutPt(t,p),ClipperLib.IntPoint.op_Inequality(i.Pt,n)&&((t=i).Pt.X=n.X,t.Pt.Y=n.Y,i=this.DupOutPt(t,p))}if(l==ClipperLib.Direction.dLeftToRight){for(;e.Next.Pt.X<=n.X&&e.Next.Pt.X>=e.Pt.X&&e.Next.Pt.Y==n.Y;)e=e.Next;p&&e.Pt.X!=n.X&&(e=e.Next),r=this.DupOutPt(e,!p),ClipperLib.IntPoint.op_Inequality(r.Pt,n)&&((e=r).Pt.X=n.X,e.Pt.Y=n.Y,r=this.DupOutPt(e,!p))}else{for(;e.Next.Pt.X>=n.X&&e.Next.Pt.X<=e.Pt.X&&e.Next.Pt.Y==n.Y;)e=e.Next;p||e.Pt.X==n.X||(e=e.Next),r=this.DupOutPt(e,p),ClipperLib.IntPoint.op_Inequality(r.Pt,n)&&((e=r).Pt.X=n.X,e.Pt.Y=n.Y,r=this.DupOutPt(e,p))}return o==ClipperLib.Direction.dLeftToRight==p?(t.Prev=e,e.Next=t,i.Next=r,r.Prev=i):(t.Next=e,e.Prev=t,i.Prev=r,r.Next=i),!0},ClipperLib.Clipper.prototype.JoinPoints=function(t,i,e){var r=t.OutPt1,n=new ClipperLib.OutPt,p=t.OutPt2,o=new ClipperLib.OutPt,l=t.OutPt1.Pt.Y==t.OffPt.Y;if(l&&ClipperLib.IntPoint.op_Equality(t.OffPt,t.OutPt1.Pt)&&ClipperLib.IntPoint.op_Equality(t.OffPt,t.OutPt2.Pt)){for(n=t.OutPt1.Next;n!=r&&ClipperLib.IntPoint.op_Equality(n.Pt,t.OffPt);)n=n.Next;var s=n.Pt.Y>t.OffPt.Y;for(o=t.OutPt2.Next;o!=p&&ClipperLib.IntPoint.op_Equality(o.Pt,t.OffPt);)o=o.Next;return s!=o.Pt.Y>t.OffPt.Y&&(s?(n=this.DupOutPt(r,!1),o=this.DupOutPt(p,!0),r.Prev=p,p.Next=r,n.Next=o,o.Prev=n,t.OutPt1=r,t.OutPt2=n,!0):(n=this.DupOutPt(r,!0),o=this.DupOutPt(p,!1),r.Next=p,p.Prev=r,n.Prev=o,o.Next=n,t.OutPt1=r,t.OutPt2=n,!0))}if(l){for(n=r;r.Prev.Pt.Y==r.Pt.Y&&r.Prev!=n&&r.Prev!=p;)r=r.Prev;for(;n.Next.Pt.Y==n.Pt.Y&&n.Next!=r&&n.Next!=p;)n=n.Next;if(n.Next==r||n.Next==p)return!1;for(o=p;p.Prev.Pt.Y==p.Pt.Y&&p.Prev!=o&&p.Prev!=n;)p=p.Prev;for(;o.Next.Pt.Y==o.Pt.Y&&o.Next!=p&&o.Next!=r;)o=o.Next;if(o.Next==p||o.Next==r)return!1;var h={Left:null,Right:null};if(!this.GetOverlap(r.Pt.X,n.Pt.X,p.Pt.X,o.Pt.X,h))return!1;var u,a=h.Left,C=h.Right,f=new ClipperLib.IntPoint;return r.Pt.X>=a&&r.Pt.X<=C?(f.X=r.Pt.X,f.Y=r.Pt.Y,u=r.Pt.X>n.Pt.X):p.Pt.X>=a&&p.Pt.X<=C?(f.X=p.Pt.X,f.Y=p.Pt.Y,u=p.Pt.X>o.Pt.X):n.Pt.X>=a&&n.Pt.X<=C?(f.X=n.Pt.X,f.Y=n.Pt.Y,u=n.Pt.X>r.Pt.X):(f.X=o.Pt.X,f.Y=o.Pt.Y,u=o.Pt.X>p.Pt.X),t.OutPt1=r,t.OutPt2=p,this.JoinHorz(r,n,p,o,f,u)}for(n=r.Next;ClipperLib.IntPoint.op_Equality(n.Pt,r.Pt)&&n!=r;)n=n.Next;var d=n.Pt.Y>r.Pt.Y||!ClipperLib.ClipperBase.SlopesEqual(r.Pt,n.Pt,t.OffPt,this.m_UseFullRange);if(d){for(n=r.Prev;ClipperLib.IntPoint.op_Equality(n.Pt,r.Pt)&&n!=r;)n=n.Prev;if(n.Pt.Y>r.Pt.Y||!ClipperLib.ClipperBase.SlopesEqual(r.Pt,n.Pt,t.OffPt,this.m_UseFullRange))return!1}for(o=p.Next;ClipperLib.IntPoint.op_Equality(o.Pt,p.Pt)&&o!=p;)o=o.Next;var L=o.Pt.Y>p.Pt.Y||!ClipperLib.ClipperBase.SlopesEqual(p.Pt,o.Pt,t.OffPt,this.m_UseFullRange);if(L){for(o=p.Prev;ClipperLib.IntPoint.op_Equality(o.Pt,p.Pt)&&o!=p;)o=o.Prev;if(o.Pt.Y>p.Pt.Y||!ClipperLib.ClipperBase.SlopesEqual(p.Pt,o.Pt,t.OffPt,this.m_UseFullRange))return!1}return n!=r&&o!=p&&n!=o&&(i!=e||d!=L)&&(d?(n=this.DupOutPt(r,!1),o=this.DupOutPt(p,!0),r.Prev=p,p.Next=r,n.Next=o,o.Prev=n,t.OutPt1=r,t.OutPt2=n,!0):(n=this.DupOutPt(r,!0),o=this.DupOutPt(p,!1),r.Next=p,p.Prev=r,n.Prev=o,o.Next=n,t.OutPt1=r,t.OutPt2=n,!0))},ClipperLib.Clipper.GetBounds=function(t){for(var i=0,e=t.length;i<e&&0==t[i].length;)i++;if(i==e)return new ClipperLib.IntRect(0,0,0,0);var r=new ClipperLib.IntRect;for(r.left=t[i][0].X,r.right=r.left,r.top=t[i][0].Y,r.bottom=r.top;i<e;i++)for(var n=0,p=t[i].length;n<p;n++)t[i][n].X<r.left?r.left=t[i][n].X:t[i][n].X>r.right&&(r.right=t[i][n].X),t[i][n].Y<r.top?r.top=t[i][n].Y:t[i][n].Y>r.bottom&&(r.bottom=t[i][n].Y);return r},ClipperLib.Clipper.prototype.GetBounds2=function(t){var i=t,e=new ClipperLib.IntRect;for(e.left=t.Pt.X,e.right=t.Pt.X,e.top=t.Pt.Y,e.bottom=t.Pt.Y,t=t.Next;t!=i;)t.Pt.X<e.left&&(e.left=t.Pt.X),t.Pt.X>e.right&&(e.right=t.Pt.X),t.Pt.Y<e.top&&(e.top=t.Pt.Y),t.Pt.Y>e.bottom&&(e.bottom=t.Pt.Y),t=t.Next;return e},ClipperLib.Clipper.PointInPolygon=function(t,i){var e=0,r=i.length;if(r<3)return 0;for(var n=i[0],p=1;p<=r;++p){var o=p==r?i[0]:i[p];if(o.Y==t.Y&&(o.X==t.X||n.Y==t.Y&&o.X>t.X==n.X<t.X))return-1;if(n.Y<t.Y!=o.Y<t.Y)if(n.X>=t.X)if(o.X>t.X)e=1-e;else{if(0==(l=(n.X-t.X)*(o.Y-t.Y)-(o.X-t.X)*(n.Y-t.Y)))return-1;l>0==o.Y>n.Y&&(e=1-e)}else if(o.X>t.X){var l;if(0==(l=(n.X-t.X)*(o.Y-t.Y)-(o.X-t.X)*(n.Y-t.Y)))return-1;l>0==o.Y>n.Y&&(e=1-e)}n=o}return e},ClipperLib.Clipper.prototype.PointInPolygon=function(t,i){for(var e=0,r=i;;){var n=i.Pt.X,p=i.Pt.Y,o=i.Next.Pt.X,l=i.Next.Pt.Y;if(l==t.Y&&(o==t.X||p==t.Y&&o>t.X==n<t.X))return-1;if(p<t.Y!=l<t.Y)if(n>=t.X)if(o>t.X)e=1-e;else{if(0==(s=(n-t.X)*(l-t.Y)-(o-t.X)*(p-t.Y)))return-1;s>0==l>p&&(e=1-e)}else if(o>t.X){var s;if(0==(s=(n-t.X)*(l-t.Y)-(o-t.X)*(p-t.Y)))return-1;s>0==l>p&&(e=1-e)}if(r==(i=i.Next))break}return e},ClipperLib.Clipper.prototype.Poly2ContainsPoly1=function(t,i){var e=t;do{var r=this.PointInPolygon(e.Pt,i);if(r>=0)return 0!=r;e=e.Next}while(e!=t);return!0},ClipperLib.Clipper.prototype.FixupFirstLefts1=function(t,i){for(var e=0,r=this.m_PolyOuts.length;e<r;e++){var n=this.m_PolyOuts[e];null!==n.Pts&&n.FirstLeft==t&&this.Poly2ContainsPoly1(n.Pts,i.Pts)&&(n.FirstLeft=i)}},ClipperLib.Clipper.prototype.FixupFirstLefts2=function(t,i){for(var e=0,r=this.m_PolyOuts,n=r.length,p=r[e];e<n;p=r[++e])p.FirstLeft==t&&(p.FirstLeft=i)},ClipperLib.Clipper.ParseFirstLeft=function(t){for(;null!=t&&null==t.Pts;)t=t.FirstLeft;return t},ClipperLib.Clipper.prototype.JoinCommonEdges=function(){for(var t=0,i=this.m_Joins.length;t<i;t++){var e,r=this.m_Joins[t],n=this.GetOutRec(r.OutPt1.Idx),p=this.GetOutRec(r.OutPt2.Idx);if(null!=n.Pts&&null!=p.Pts)if(e=n==p?n:this.Param1RightOfParam2(n,p)?p:this.Param1RightOfParam2(p,n)?n:this.GetLowermostRec(n,p),this.JoinPoints(r,n,p))if(n==p){if(n.Pts=r.OutPt1,n.BottomPt=null,(p=this.CreateOutRec()).Pts=r.OutPt2,this.UpdateOutPtIdxs(p),this.m_UsingPolyTree)for(var o=0,l=this.m_PolyOuts.length;o<l-1;o++){var s=this.m_PolyOuts[o];null!=s.Pts&&ClipperLib.Clipper.ParseFirstLeft(s.FirstLeft)==n&&s.IsHole!=n.IsHole&&(this.Poly2ContainsPoly1(s.Pts,r.OutPt2)&&(s.FirstLeft=p))}this.Poly2ContainsPoly1(p.Pts,n.Pts)?(p.IsHole=!n.IsHole,p.FirstLeft=n,this.m_UsingPolyTree&&this.FixupFirstLefts2(p,n),(p.IsHole^this.ReverseSolution)==this.Area(p)>0&&this.ReversePolyPtLinks(p.Pts)):this.Poly2ContainsPoly1(n.Pts,p.Pts)?(p.IsHole=n.IsHole,n.IsHole=!p.IsHole,p.FirstLeft=n.FirstLeft,n.FirstLeft=p,this.m_UsingPolyTree&&this.FixupFirstLefts2(n,p),(n.IsHole^this.ReverseSolution)==this.Area(n)>0&&this.ReversePolyPtLinks(n.Pts)):(p.IsHole=n.IsHole,p.FirstLeft=n.FirstLeft,this.m_UsingPolyTree&&this.FixupFirstLefts1(n,p))}else p.Pts=null,p.BottomPt=null,p.Idx=n.Idx,n.IsHole=e.IsHole,e==p&&(n.FirstLeft=p.FirstLeft),p.FirstLeft=n,this.m_UsingPolyTree&&this.FixupFirstLefts2(p,n)}},ClipperLib.Clipper.prototype.UpdateOutPtIdxs=function(t){var i=t.Pts;do{i.Idx=t.Idx,i=i.Prev}while(i!=t.Pts)},ClipperLib.Clipper.prototype.DoSimplePolygons=function(){for(var t=0;t<this.m_PolyOuts.length;){var i=this.m_PolyOuts[t++],e=i.Pts;if(null!==e)do{for(var r=e.Next;r!=i.Pts;){if(ClipperLib.IntPoint.op_Equality(e.Pt,r.Pt)&&r.Next!=e&&r.Prev!=e){var n=e.Prev,p=r.Prev;e.Prev=p,p.Next=e,r.Prev=n,n.Next=r,i.Pts=e;var o=this.CreateOutRec();o.Pts=r,this.UpdateOutPtIdxs(o),this.Poly2ContainsPoly1(o.Pts,i.Pts)?(o.IsHole=!i.IsHole,o.FirstLeft=i):this.Poly2ContainsPoly1(i.Pts,o.Pts)?(o.IsHole=i.IsHole,i.IsHole=!o.IsHole,o.FirstLeft=i.FirstLeft,i.FirstLeft=o):(o.IsHole=i.IsHole,o.FirstLeft=i.FirstLeft),r=e}r=r.Next}e=e.Next}while(e!=i.Pts)}},ClipperLib.Clipper.Area=function(t){var i=t.length;if(i<3)return 0;for(var e=0,r=0,n=i-1;r<i;++r)e+=(t[n].X+t[r].X)*(t[n].Y-t[r].Y),n=r;return.5*-e},ClipperLib.Clipper.prototype.Area=function(t){var i=t.Pts;if(null==i)return 0;var e=0;do{e+=(i.Prev.Pt.X+i.Pt.X)*(i.Prev.Pt.Y-i.Pt.Y),i=i.Next}while(i!=t.Pts);return.5*e},use_deprecated&&(ClipperLib.Clipper.OffsetPaths=function(t,i,e,r,n){var p=new ClipperLib.Paths,o=new ClipperLib.ClipperOffset(n,n);return o.AddPaths(t,e,r),o.Execute(p,i),p}),ClipperLib.Clipper.SimplifyPolygon=function(t,i){var e=new Array,r=new ClipperLib.Clipper(0);return r.StrictlySimple=!0,r.AddPath(t,ClipperLib.PolyType.ptSubject,!0),r.Execute(ClipperLib.ClipType.ctUnion,e,i,i),e},ClipperLib.Clipper.SimplifyPolygons=function(t,i){void 0===i&&(i=ClipperLib.PolyFillType.pftEvenOdd);var e=new Array,r=new ClipperLib.Clipper(0);return r.StrictlySimple=!0,r.AddPaths(t,ClipperLib.PolyType.ptSubject,!0),r.Execute(ClipperLib.ClipType.ctUnion,e,i,i),e},ClipperLib.Clipper.DistanceSqrd=function(t,i){var e=t.X-i.X,r=t.Y-i.Y;return e*e+r*r},ClipperLib.Clipper.DistanceFromLineSqrd=function(t,i,e){var r=i.Y-e.Y,n=e.X-i.X,p=r*i.X+n*i.Y;return(p=r*t.X+n*t.Y-p)*p/(r*r+n*n)},ClipperLib.Clipper.SlopesNearCollinear=function(t,i,e,r){return ClipperLib.Clipper.DistanceFromLineSqrd(i,t,e)<r},ClipperLib.Clipper.PointsAreClose=function(t,i,e){var r=t.X-i.X,n=t.Y-i.Y;return r*r+n*n<=e},ClipperLib.Clipper.ExcludeOp=function(t){var i=t.Prev;return i.Next=t.Next,t.Next.Prev=i,i.Idx=0,i},ClipperLib.Clipper.CleanPolygon=function(t,i){void 0===i&&(i=1.415);var e=t.length;if(0==e)return new Array;for(var r=new Array(e),n=0;n<e;++n)r[n]=new ClipperLib.OutPt;for(n=0;n<e;++n)r[n].Pt=t[n],r[n].Next=r[(n+1)%e],r[n].Next.Prev=r[n],r[n].Idx=0;for(var p=i*i,o=r[0];0==o.Idx&&o.Next!=o.Prev;)ClipperLib.Clipper.PointsAreClose(o.Pt,o.Prev.Pt,p)?(o=ClipperLib.Clipper.ExcludeOp(o),e--):ClipperLib.Clipper.PointsAreClose(o.Prev.Pt,o.Next.Pt,p)?(ClipperLib.Clipper.ExcludeOp(o.Next),o=ClipperLib.Clipper.ExcludeOp(o),e-=2):ClipperLib.Clipper.SlopesNearCollinear(o.Prev.Pt,o.Pt,o.Next.Pt,p)?(o=ClipperLib.Clipper.ExcludeOp(o),e--):(o.Idx=1,o=o.Next);e<3&&(e=0);var l=new Array(e);for(n=0;n<e;++n)l[n]=new ClipperLib.IntPoint(o.Pt),o=o.Next;return r=null,l},ClipperLib.Clipper.CleanPolygons=function(t,i){for(var e=new Array(t.length),r=0,n=t.length;r<n;r++)e[r]=ClipperLib.Clipper.CleanPolygon(t[r],i);return e},ClipperLib.Clipper.Minkowski=function(t,i,e,r){var n=r?1:0,p=t.length,o=i.length,l=new Array;if(e)for(var s=0;s<o;s++){for(var h=new Array(p),u=0,a=t.length,C=t[u];u<a;C=t[++u])h[u]=new ClipperLib.IntPoint(i[s].X+C.X,i[s].Y+C.Y);l.push(h)}else for(s=0;s<o;s++){for(h=new Array(p),u=0,a=t.length,C=t[u];u<a;C=t[++u])h[u]=new ClipperLib.IntPoint(i[s].X-C.X,i[s].Y-C.Y);l.push(h)}var f=new Array;for(s=0;s<o-1+n;s++)for(u=0;u<p;u++){var d=new Array;d.push(l[s%o][u%p]),d.push(l[(s+1)%o][u%p]),d.push(l[(s+1)%o][(u+1)%p]),d.push(l[s%o][(u+1)%p]),ClipperLib.Clipper.Orientation(d)||d.reverse(),f.push(d)}var L=new ClipperLib.Clipper(0);return L.AddPaths(f,ClipperLib.PolyType.ptSubject,!0),L.Execute(ClipperLib.ClipType.ctUnion,l,ClipperLib.PolyFillType.pftNonZero,ClipperLib.PolyFillType.pftNonZero),l},ClipperLib.Clipper.MinkowskiSum=function(){var t=arguments,i=t.length;if(3==i){var e=t[0],r=t[1],n=t[2];return ClipperLib.Clipper.Minkowski(e,r,!0,n)}if(4==i){e=t[0];for(var p=t[1],o=t[2],l=(n=t[3],new ClipperLib.Clipper),s=0,h=p.length;s<h;++s){var u=ClipperLib.Clipper.Minkowski(e,p[s],!0,n);l.AddPaths(u,ClipperLib.PolyType.ptSubject,!0)}n&&l.AddPaths(p,ClipperLib.PolyType.ptClip,!0);var a=new ClipperLib.Paths;return l.Execute(ClipperLib.ClipType.ctUnion,a,o,o),a}},ClipperLib.Clipper.MinkowskiDiff=function(t,i,e){return ClipperLib.Clipper.Minkowski(t,i,!1,e)},ClipperLib.Clipper.PolyTreeToPaths=function(t){var i=new Array;return ClipperLib.Clipper.AddPolyNodeToPaths(t,ClipperLib.Clipper.NodeType.ntAny,i),i},ClipperLib.Clipper.AddPolyNodeToPaths=function(t,i,e){var r=!0;switch(i){case ClipperLib.Clipper.NodeType.ntOpen:return;case ClipperLib.Clipper.NodeType.ntClosed:r=!t.IsOpen}t.m_polygon.length>0&&r&&e.push(t.m_polygon);for(var n=0,p=t.Childs(),o=p.length,l=p[n];n<o;l=p[++n])ClipperLib.Clipper.AddPolyNodeToPaths(l,i,e)},ClipperLib.Clipper.OpenPathsFromPolyTree=function(t){for(var i=new ClipperLib.Paths,e=0,r=t.ChildCount();e<r;e++)t.Childs()[e].IsOpen&&i.push(t.Childs()[e].m_polygon);return i},ClipperLib.Clipper.ClosedPathsFromPolyTree=function(t){var i=new ClipperLib.Paths;return ClipperLib.Clipper.AddPolyNodeToPaths(t,ClipperLib.Clipper.NodeType.ntClosed,i),i},Inherit(ClipperLib.Clipper,ClipperLib.ClipperBase),ClipperLib.Clipper.NodeType={ntAny:0,ntOpen:1,ntClosed:2},ClipperLib.ClipperOffset=function(t,i){void 0===t&&(t=2),void 0===i&&(i=ClipperLib.ClipperOffset.def_arc_tolerance),this.m_destPolys=new ClipperLib.Paths,this.m_srcPoly=new ClipperLib.Path,this.m_destPoly=new ClipperLib.Path,this.m_normals=new Array,this.m_delta=0,this.m_sinA=0,this.m_sin=0,this.m_cos=0,this.m_miterLim=0,this.m_StepsPerRad=0,this.m_lowest=new ClipperLib.IntPoint,this.m_polyNodes=new ClipperLib.PolyNode,this.MiterLimit=t,this.ArcTolerance=i,this.m_lowest.X=-1},ClipperLib.ClipperOffset.two_pi=6.28318530717959,ClipperLib.ClipperOffset.def_arc_tolerance=.25,ClipperLib.ClipperOffset.prototype.Clear=function(){ClipperLib.Clear(this.m_polyNodes.Childs()),this.m_lowest.X=-1},ClipperLib.ClipperOffset.Round=ClipperLib.Clipper.Round,ClipperLib.ClipperOffset.prototype.AddPath=function(t,i,e){var r=t.length-1;if(!(r<0)){var n=new ClipperLib.PolyNode;if(n.m_jointype=i,n.m_endtype=e,e==ClipperLib.EndType.etClosedLine||e==ClipperLib.EndType.etClosedPolygon)for(;r>0&&ClipperLib.IntPoint.op_Equality(t[0],t[r]);)r--;n.m_polygon.push(t[0]);for(var p=0,o=0,l=1;l<=r;l++)ClipperLib.IntPoint.op_Inequality(n.m_polygon[p],t[l])&&(p++,n.m_polygon.push(t[l]),(t[l].Y>n.m_polygon[o].Y||t[l].Y==n.m_polygon[o].Y&&t[l].X<n.m_polygon[o].X)&&(o=p));if(!(e==ClipperLib.EndType.etClosedPolygon&&p<2||e!=ClipperLib.EndType.etClosedPolygon&&p<0)&&(this.m_polyNodes.AddChild(n),e==ClipperLib.EndType.etClosedPolygon))if(this.m_lowest.X<0)this.m_lowest=new ClipperLib.IntPoint(0,o);else{var s=this.m_polyNodes.Childs()[this.m_lowest.X].m_polygon[this.m_lowest.Y];(n.m_polygon[o].Y>s.Y||n.m_polygon[o].Y==s.Y&&n.m_polygon[o].X<s.X)&&(this.m_lowest=new ClipperLib.IntPoint(this.m_polyNodes.ChildCount()-1,o))}}},ClipperLib.ClipperOffset.prototype.AddPaths=function(t,i,e){for(var r=0,n=t.length;r<n;r++)this.AddPath(t[r],i,e)},ClipperLib.ClipperOffset.prototype.FixOrientations=function(){if(this.m_lowest.X>=0&&!ClipperLib.Clipper.Orientation(this.m_polyNodes.Childs()[this.m_lowest.X].m_polygon))for(var t=0;t<this.m_polyNodes.ChildCount();t++){((i=this.m_polyNodes.Childs()[t]).m_endtype==ClipperLib.EndType.etClosedPolygon||i.m_endtype==ClipperLib.EndType.etClosedLine&&ClipperLib.Clipper.Orientation(i.m_polygon))&&i.m_polygon.reverse()}else for(t=0;t<this.m_polyNodes.ChildCount();t++){var i;(i=this.m_polyNodes.Childs()[t]).m_endtype!=ClipperLib.EndType.etClosedLine||ClipperLib.Clipper.Orientation(i.m_polygon)||i.m_polygon.reverse()}},ClipperLib.ClipperOffset.GetUnitNormal=function(t,i){var e=i.X-t.X,r=i.Y-t.Y;if(0==e&&0==r)return new ClipperLib.DoublePoint(0,0);var n=1/Math.sqrt(e*e+r*r);return e*=n,r*=n,new ClipperLib.DoublePoint(r,-e)},ClipperLib.ClipperOffset.prototype.DoOffset=function(t){if(this.m_destPolys=new Array,this.m_delta=t,ClipperLib.ClipperBase.near_zero(t))for(var i=0;i<this.m_polyNodes.ChildCount();i++){(n=this.m_polyNodes.Childs()[i]).m_endtype==ClipperLib.EndType.etClosedPolygon&&this.m_destPolys.push(n.m_polygon)}else{var e;this.MiterLimit>2?this.m_miterLim=2/(this.MiterLimit*this.MiterLimit):this.m_miterLim=.5,e=this.ArcTolerance<=0?ClipperLib.ClipperOffset.def_arc_tolerance:this.ArcTolerance>Math.abs(t)*ClipperLib.ClipperOffset.def_arc_tolerance?Math.abs(t)*ClipperLib.ClipperOffset.def_arc_tolerance:this.ArcTolerance;var r=3.14159265358979/Math.acos(1-e/Math.abs(t));this.m_sin=Math.sin(ClipperLib.ClipperOffset.two_pi/r),this.m_cos=Math.cos(ClipperLib.ClipperOffset.two_pi/r),this.m_StepsPerRad=r/ClipperLib.ClipperOffset.two_pi,t<0&&(this.m_sin=-this.m_sin);for(i=0;i<this.m_polyNodes.ChildCount();i++){var n=this.m_polyNodes.Childs()[i];this.m_srcPoly=n.m_polygon;var p=this.m_srcPoly.length;if(!(0==p||t<=0&&(p<3||n.m_endtype!=ClipperLib.EndType.etClosedPolygon)))if(this.m_destPoly=new Array,1!=p){this.m_normals.length=0;for(a=0;a<p-1;a++)this.m_normals.push(ClipperLib.ClipperOffset.GetUnitNormal(this.m_srcPoly[a],this.m_srcPoly[a+1]));if(n.m_endtype==ClipperLib.EndType.etClosedLine||n.m_endtype==ClipperLib.EndType.etClosedPolygon?this.m_normals.push(ClipperLib.ClipperOffset.GetUnitNormal(this.m_srcPoly[p-1],this.m_srcPoly[0])):this.m_normals.push(new ClipperLib.DoublePoint(this.m_normals[p-2])),n.m_endtype==ClipperLib.EndType.etClosedPolygon){var o=p-1;for(a=0;a<p;a++)o=this.OffsetPoint(a,o,n.m_jointype);this.m_destPolys.push(this.m_destPoly)}else if(n.m_endtype==ClipperLib.EndType.etClosedLine){for(o=p-1,a=0;a<p;a++)o=this.OffsetPoint(a,o,n.m_jointype);this.m_destPolys.push(this.m_destPoly),this.m_destPoly=new Array;var l=this.m_normals[p-1];for(a=p-1;a>0;a--)this.m_normals[a]=new ClipperLib.DoublePoint(-this.m_normals[a-1].X,-this.m_normals[a-1].Y);this.m_normals[0]=new ClipperLib.DoublePoint(-l.X,-l.Y),o=0;for(a=p-1;a>=0;a--)o=this.OffsetPoint(a,o,n.m_jointype);this.m_destPolys.push(this.m_destPoly)}else{var s;for(o=0,a=1;a<p-1;++a)o=this.OffsetPoint(a,o,n.m_jointype);if(n.m_endtype==ClipperLib.EndType.etOpenButt){a=p-1;s=new ClipperLib.IntPoint(ClipperLib.ClipperOffset.Round(this.m_srcPoly[a].X+this.m_normals[a].X*t),ClipperLib.ClipperOffset.Round(this.m_srcPoly[a].Y+this.m_normals[a].Y*t)),this.m_destPoly.push(s),s=new ClipperLib.IntPoint(ClipperLib.ClipperOffset.Round(this.m_srcPoly[a].X-this.m_normals[a].X*t),ClipperLib.ClipperOffset.Round(this.m_srcPoly[a].Y-this.m_normals[a].Y*t)),this.m_destPoly.push(s)}else{a=p-1;o=p-2,this.m_sinA=0,this.m_normals[a]=new ClipperLib.DoublePoint(-this.m_normals[a].X,-this.m_normals[a].Y),n.m_endtype==ClipperLib.EndType.etOpenSquare?this.DoSquare(a,o):this.DoRound(a,o)}for(a=p-1;a>0;a--)this.m_normals[a]=new ClipperLib.DoublePoint(-this.m_normals[a-1].X,-this.m_normals[a-1].Y);this.m_normals[0]=new ClipperLib.DoublePoint(-this.m_normals[1].X,-this.m_normals[1].Y);for(a=(o=p-1)-1;a>0;--a)o=this.OffsetPoint(a,o,n.m_jointype);n.m_endtype==ClipperLib.EndType.etOpenButt?(s=new ClipperLib.IntPoint(ClipperLib.ClipperOffset.Round(this.m_srcPoly[0].X-this.m_normals[0].X*t),ClipperLib.ClipperOffset.Round(this.m_srcPoly[0].Y-this.m_normals[0].Y*t)),this.m_destPoly.push(s),s=new ClipperLib.IntPoint(ClipperLib.ClipperOffset.Round(this.m_srcPoly[0].X+this.m_normals[0].X*t),ClipperLib.ClipperOffset.Round(this.m_srcPoly[0].Y+this.m_normals[0].Y*t)),this.m_destPoly.push(s)):(o=1,this.m_sinA=0,n.m_endtype==ClipperLib.EndType.etOpenSquare?this.DoSquare(0,1):this.DoRound(0,1)),this.m_destPolys.push(this.m_destPoly)}}else{if(n.m_jointype==ClipperLib.JoinType.jtRound)for(var h=1,u=0,a=1;a<=r;a++){this.m_destPoly.push(new ClipperLib.IntPoint(ClipperLib.ClipperOffset.Round(this.m_srcPoly[0].X+h*t),ClipperLib.ClipperOffset.Round(this.m_srcPoly[0].Y+u*t)));var C=h;h=h*this.m_cos-this.m_sin*u,u=C*this.m_sin+u*this.m_cos}else{h=-1,u=-1;for(var a=0;a<4;++a)this.m_destPoly.push(new ClipperLib.IntPoint(ClipperLib.ClipperOffset.Round(this.m_srcPoly[0].X+h*t),ClipperLib.ClipperOffset.Round(this.m_srcPoly[0].Y+u*t))),h<0?h=1:u<0?u=1:h=-1}this.m_destPolys.push(this.m_destPoly)}}}},ClipperLib.ClipperOffset.prototype.Execute=function(){var t=arguments;if(t[0]instanceof ClipperLib.PolyTree){p=t[1];if((n=t[0]).Clear(),this.FixOrientations(),this.DoOffset(p),(r=new ClipperLib.Clipper(0)).AddPaths(this.m_destPolys,ClipperLib.PolyType.ptSubject,!0),p>0)r.Execute(ClipperLib.ClipType.ctUnion,n,ClipperLib.PolyFillType.pftPositive,ClipperLib.PolyFillType.pftPositive);else{l=ClipperLib.Clipper.GetBounds(this.m_destPolys);if((o=new ClipperLib.Path).push(new ClipperLib.IntPoint(l.left-10,l.bottom+10)),o.push(new ClipperLib.IntPoint(l.right+10,l.bottom+10)),o.push(new ClipperLib.IntPoint(l.right+10,l.top-10)),o.push(new ClipperLib.IntPoint(l.left-10,l.top-10)),r.AddPath(o,ClipperLib.PolyType.ptSubject,!0),r.ReverseSolution=!0,r.Execute(ClipperLib.ClipType.ctUnion,n,ClipperLib.PolyFillType.pftNegative,ClipperLib.PolyFillType.pftNegative),1==n.ChildCount()&&n.Childs()[0].ChildCount()>0){var i=n.Childs()[0];n.Childs()[0]=i.Childs()[0];for(var e=1;e<i.ChildCount();e++)n.AddChild(i.Childs()[e])}else n.Clear()}}else{var r,n=t[0],p=t[1];if(ClipperLib.Clear(n),this.FixOrientations(),this.DoOffset(p),(r=new ClipperLib.Clipper(0)).AddPaths(this.m_destPolys,ClipperLib.PolyType.ptSubject,!0),p>0)r.Execute(ClipperLib.ClipType.ctUnion,n,ClipperLib.PolyFillType.pftPositive,ClipperLib.PolyFillType.pftPositive);else{var o,l=ClipperLib.Clipper.GetBounds(this.m_destPolys);(o=new ClipperLib.Path).push(new ClipperLib.IntPoint(l.left-10,l.bottom+10)),o.push(new ClipperLib.IntPoint(l.right+10,l.bottom+10)),o.push(new ClipperLib.IntPoint(l.right+10,l.top-10)),o.push(new ClipperLib.IntPoint(l.left-10,l.top-10)),r.AddPath(o,ClipperLib.PolyType.ptSubject,!0),r.ReverseSolution=!0,r.Execute(ClipperLib.ClipType.ctUnion,n,ClipperLib.PolyFillType.pftNegative,ClipperLib.PolyFillType.pftNegative),n.length>0&&n.splice(0,1)}}},ClipperLib.ClipperOffset.prototype.OffsetPoint=function(t,i,e){if(this.m_sinA=this.m_normals[i].X*this.m_normals[t].Y-this.m_normals[t].X*this.m_normals[i].Y,this.m_sinA<5e-5&&this.m_sinA>-5e-5)return i;if(this.m_sinA>1?this.m_sinA=1:this.m_sinA<-1&&(this.m_sinA=-1),this.m_sinA*this.m_delta<0)this.m_destPoly.push(new ClipperLib.IntPoint(ClipperLib.ClipperOffset.Round(this.m_srcPoly[t].X+this.m_normals[i].X*this.m_delta),ClipperLib.ClipperOffset.Round(this.m_srcPoly[t].Y+this.m_normals[i].Y*this.m_delta))),this.m_destPoly.push(new ClipperLib.IntPoint(this.m_srcPoly[t])),this.m_destPoly.push(new ClipperLib.IntPoint(ClipperLib.ClipperOffset.Round(this.m_srcPoly[t].X+this.m_normals[t].X*this.m_delta),ClipperLib.ClipperOffset.Round(this.m_srcPoly[t].Y+this.m_normals[t].Y*this.m_delta)));else switch(e){case ClipperLib.JoinType.jtMiter:var r=this.m_normals[t].X*this.m_normals[i].X+this.m_normals[t].Y*this.m_normals[i].Y+1;r>=this.m_miterLim?this.DoMiter(t,i,r):this.DoSquare(t,i);break;case ClipperLib.JoinType.jtSquare:this.DoSquare(t,i);break;case ClipperLib.JoinType.jtRound:this.DoRound(t,i)}return i=t},ClipperLib.ClipperOffset.prototype.DoSquare=function(t,i){var e=Math.tan(Math.atan2(this.m_sinA,this.m_normals[i].X*this.m_normals[t].X+this.m_normals[i].Y*this.m_normals[t].Y)/4);this.m_destPoly.push(new ClipperLib.IntPoint(ClipperLib.ClipperOffset.Round(this.m_srcPoly[t].X+this.m_delta*(this.m_normals[i].X-this.m_normals[i].Y*e)),ClipperLib.ClipperOffset.Round(this.m_srcPoly[t].Y+this.m_delta*(this.m_normals[i].Y+this.m_normals[i].X*e)))),this.m_destPoly.push(new ClipperLib.IntPoint(ClipperLib.ClipperOffset.Round(this.m_srcPoly[t].X+this.m_delta*(this.m_normals[t].X+this.m_normals[t].Y*e)),ClipperLib.ClipperOffset.Round(this.m_srcPoly[t].Y+this.m_delta*(this.m_normals[t].Y-this.m_normals[t].X*e))))},ClipperLib.ClipperOffset.prototype.DoMiter=function(t,i,e){var r=this.m_delta/e;this.m_destPoly.push(new ClipperLib.IntPoint(ClipperLib.ClipperOffset.Round(this.m_srcPoly[t].X+(this.m_normals[i].X+this.m_normals[t].X)*r),ClipperLib.ClipperOffset.Round(this.m_srcPoly[t].Y+(this.m_normals[i].Y+this.m_normals[t].Y)*r)))},ClipperLib.ClipperOffset.prototype.DoRound=function(t,i){for(var e,r=Math.atan2(this.m_sinA,this.m_normals[i].X*this.m_normals[t].X+this.m_normals[i].Y*this.m_normals[t].Y),n=ClipperLib.Cast_Int32(ClipperLib.ClipperOffset.Round(this.m_StepsPerRad*Math.abs(r))),p=this.m_normals[i].X,o=this.m_normals[i].Y,l=0;l<n;++l)this.m_destPoly.push(new ClipperLib.IntPoint(ClipperLib.ClipperOffset.Round(this.m_srcPoly[t].X+p*this.m_delta),ClipperLib.ClipperOffset.Round(this.m_srcPoly[t].Y+o*this.m_delta))),e=p,p=p*this.m_cos-this.m_sin*o,o=e*this.m_sin+o*this.m_cos;this.m_destPoly.push(new ClipperLib.IntPoint(ClipperLib.ClipperOffset.Round(this.m_srcPoly[t].X+this.m_normals[t].X*this.m_delta),ClipperLib.ClipperOffset.Round(this.m_srcPoly[t].Y+this.m_normals[t].Y*this.m_delta)))},ClipperLib.Error=function(t){try{throw new Error(t)}catch(t){alert(t.message)}},ClipperLib.JS={},ClipperLib.JS.AreaOfPolygon=function(t,i){return i||(i=1),ClipperLib.Clipper.Area(t)/(i*i)},ClipperLib.JS.AreaOfPolygons=function(t,i){i||(i=1);for(var e=0,r=0;r<t.length;r++)e+=ClipperLib.Clipper.Area(t[r]);return e/(i*i)},ClipperLib.JS.BoundsOfPath=function(t,i){return ClipperLib.JS.BoundsOfPaths([t],i)},ClipperLib.JS.BoundsOfPaths=function(t,i){i||(i=1);var e=ClipperLib.Clipper.GetBounds(t);return e.left/=i,e.bottom/=i,e.right/=i,e.top/=i,e},ClipperLib.JS.Clean=function(t,i){if(!(t instanceof Array))return[];var e=t[0]instanceof Array;t=ClipperLib.JS.Clone(t);if("number"!=typeof i||null===i)return ClipperLib.Error("Delta is not a number in Clean()."),t;if(0===t.length||1==t.length&&0===t[0].length||i<0)return t;e||(t=[t]);for(var r,n,p,o,l,s,h,u=t.length,a=[],C=0;C<u;C++)if(0!==(r=(n=t[C]).length))if(r<3)p=n,a.push(p);else{for(p=n,o=i*i,l=n[0],s=1,h=1;h<r;h++)(n[h].X-l.X)*(n[h].X-l.X)+(n[h].Y-l.Y)*(n[h].Y-l.Y)<=o||(p[s]=n[h],l=n[h],s++);l=n[s-1],(n[0].X-l.X)*(n[0].X-l.X)+(n[0].Y-l.Y)*(n[0].Y-l.Y)<=o&&s--,s<r&&p.splice(s,r-s),p.length&&a.push(p)}return!e&&a.length?a=a[0]:e||0!==a.length?e&&0===a.length&&(a=[[]]):a=[],a},ClipperLib.JS.Clone=function(t){if(!(t instanceof Array))return[];if(0===t.length)return[];if(1==t.length&&0===t[0].length)return[[]];var i=t[0]instanceof Array;i||(t=[t]);var e,r,n,p,o=t.length,l=new Array(o);for(r=0;r<o;r++){for(e=t[r].length,p=new Array(e),n=0;n<e;n++)p[n]={X:t[r][n].X,Y:t[r][n].Y};l[r]=p}return i||(l=l[0]),l},ClipperLib.JS.Lighten=function(t,i){if(!(t instanceof Array))return[];if("number"!=typeof i||null===i)return ClipperLib.Error("Tolerance is not a number in Lighten()."),ClipperLib.JS.Clone(t);if(0===t.length||1==t.length&&0===t[0].length||i<0)return ClipperLib.JS.Clone(t);var e,r,n,p,o,l,s,h,u,a,C,f,d,L,P,b;t[0]instanceof Array||(t=[t]);var m=t.length,y=i*i,c=[];for(e=0;e<m;e++)if(0!=(l=(n=t[e]).length)){for(p=0;p<1e6;p++){for(o=[],n[(l=n.length)-1].X!=n[0].X||n[l-1].Y!=n[0].Y?(C=1,n.push({X:n[0].X,Y:n[0].Y}),l=n.length):C=0,a=[],r=0;r<l-2;r++)s=n[r],u=n[r+1],h=n[r+2],P=s.X,b=s.Y,f=h.X-P,d=h.Y-b,0===f&&0===d||((L=((u.X-P)*f+(u.Y-b)*d)/(f*f+d*d))>1?(P=h.X,b=h.Y):L>0&&(P+=f*L,b+=d*L)),(f=u.X-P)*f+(d=u.Y-b)*d<=y&&(a[r+1]=1,r++);for(o.push({X:n[0].X,Y:n[0].Y}),r=1;r<l-1;r++)a[r]||o.push({X:n[r].X,Y:n[r].Y});if(o.push({X:n[l-1].X,Y:n[l-1].Y}),C&&n.pop(),!a.length)break;n=o}o[(l=o.length)-1].X==o[0].X&&o[l-1].Y==o[0].Y&&o.pop(),o.length>2&&c.push(o)}return!t[0]instanceof Array&&(c=c[0]),void 0===c&&(c=[[]]),c},ClipperLib.JS.PerimeterOfPath=function(t,i,e){if(void 0===t)return 0;var r,n,p=Math.sqrt,o=0,l=0,s=0,h=0,u=0,a=t.length;if(a<2)return 0;for(i&&(t[a]=t[0],a++);--a;)l=(r=t[a]).X,s=r.Y,o+=p((l-(h=(n=t[a-1]).X))*(l-h)+(s-(u=n.Y))*(s-u));return i&&t.pop(),o/e},ClipperLib.JS.PerimeterOfPaths=function(t,i,e){e||(e=1);for(var r=0,n=0;n<t.length;n++)r+=ClipperLib.JS.PerimeterOfPath(t[n],i,e);return r},ClipperLib.JS.ScaleDownPath=function(t,i){var e,r;for(i||(i=1),e=t.length;e--;)(r=t[e]).X=r.X/i,r.Y=r.Y/i},ClipperLib.JS.ScaleDownPaths=function(t,i){var e,r,n;Math.round;for(i||(i=1),e=t.length;e--;)for(r=t[e].length;r--;)(n=t[e][r]).X=n.X/i,n.Y=n.Y/i},ClipperLib.JS.ScaleUpPath=function(t,i){var e,r,n=Math.round;for(i||(i=1),e=t.length;e--;)(r=t[e]).X=n(r.X*i),r.Y=n(r.Y*i)},ClipperLib.JS.ScaleUpPaths=function(t,i){var e,r,n,p=Math.round;for(i||(i=1),e=t.length;e--;)for(r=t[e].length;r--;)(n=t[e][r]).X=p(n.X*i),n.Y=p(n.Y*i)},ClipperLib.ExPolygons=function(){return[]},ClipperLib.ExPolygon=function(){this.outer=null,this.holes=null},ClipperLib.JS.AddOuterPolyNodeToExPolygons=function(t,i){var e=new ClipperLib.ExPolygon;e.outer=t.Contour();var r,n,p,o,l,s,h=t.Childs(),u=h.length;for(e.holes=new Array(u),p=0;p<u;p++)for(r=h[p],e.holes[p]=r.Contour(),o=0,s=(l=r.Childs()).length;o<s;o++)n=l[o],ClipperLib.JS.AddOuterPolyNodeToExPolygons(n,i);i.push(e)},ClipperLib.JS.ExPolygonsToPaths=function(t){var i,e,r,n,p=new ClipperLib.Paths;for(i=0,r=t.length;i<r;i++)for(p.push(t[i].outer),e=0,n=t[i].holes.length;e<n;e++)p.push(t[i].holes[e]);return p},ClipperLib.JS.PolyTreeToExPolygons=function(t){var i,e,r,n,p=new ClipperLib.ExPolygons;for(e=0,n=(r=t.Childs()).length;e<n;e++)i=r[e],ClipperLib.JS.AddOuterPolyNodeToExPolygons(i,p);return p},module.exports=ClipperLib;
//# sourceMappingURL=/sm/ed903b140a195d22316aa4e0ab9e8afc21a5547ce4e397052946c6f8692a2d4c.map